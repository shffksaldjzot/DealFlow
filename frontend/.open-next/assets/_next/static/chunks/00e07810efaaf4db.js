(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let l=(0,s.forwardRef)(({className:e,variant:s="primary",size:l="md",fullWidth:i,loading:a,disabled:n,children:o,...c},d)=>(0,t.jsxs)("button",{ref:d,className:(0,r.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-400",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400 shadow-md"}[s],{sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[l],i&&"w-full",e),disabled:n||a,...c,children:[a&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o]}));l.displayName="Button",e.s(["default",0,l])},39964,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let l=(0,s.forwardRef)(({className:e,hoverable:s,padding:l="md",children:i,...a},n)=>(0,t.jsx)("div",{ref:n,className:(0,r.cn)("bg-white rounded-2xl border border-gray-100","shadow-sm",{none:"",sm:"p-4",md:"p-5",lg:"p-6"}[l],s&&"hover:shadow-md hover:border-gray-200 transition-all duration-200 cursor-pointer",e),...a,children:i}));l.displayName="Card",e.s(["default",0,l])},22706,e=>{"use strict";var t=e.i(43476);let s=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var r=e.i(18566);function l({title:e,subtitle:l,backHref:i,actions:a}){let n=(0,r.useRouter)();return(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,t.jsx)("button",{onClick:()=>n.push(i),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(s,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e}),l&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:l})]})]}),a&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:a})]})}e.s(["default",()=>l],22706)},96640,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function r({status:e,className:r}){return(0,t.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,s.getStatusColor)(e),r),children:(0,s.getStatusLabel)(e)})}e.s(["default",()=>r])},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},32098,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157),l=e.i(37727);function i({isOpen:e,onClose:i,title:a,children:n,size:o="md"}){return((0,s.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),(0,t.jsxs)("div",{className:(0,r.cn)("relative w-full mx-4 bg-white rounded-2xl shadow-xl","animate-in fade-in zoom-in-95 duration-200",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl"}[o]),children:[a&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:a}),(0,t.jsx)("button",{onClick:i,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(l.X,{className:"w-5 h-5 text-gray-400"})})]}),(0,t.jsx)("div",{className:"px-6 py-4",children:n})]})]}):null}e.s(["default",()=>i])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},54212,e=>{"use strict";let t=(0,e.i(75254).default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>t],54212)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},73271,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(54212),l=e.i(37727),i=e.i(40160),a=e.i(59544),n=e.i(9165);function o({contract:o,templateImageUrl:c}){let[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[f,x]=(0,s.useState)(!1),g=(0,s.useRef)(null),p={};o.fieldValues?.forEach(e=>{let t=e.fieldId||e.field?.id;t&&(p[t]=e.value)});let y=o.signatures?.[0]?.signatureData,v=o.template?.fields?.find(e=>"signature"===e.fieldType),N=(0,s.useCallback)(e=>{"Escape"===e.key&&m(!1)},[]);(0,s.useEffect)(()=>(h&&(document.addEventListener("keydown",N),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",N),document.body.style.overflow=""}),[h,N]);let b=async()=>{if(g.current){x(!0);try{let{toJpeg:t}=await e.A(17571),s=await t(g.current,{quality:.95,backgroundColor:"#ffffff"}),r=document.createElement("a");r.download=`contract-${o.contractNumber}.jpeg`,r.href=s,r.click()}catch{}finally{x(!1)}}},w=(e=!1)=>!c||d?null:o.template?.fileType==="pdf"?(0,t.jsx)("iframe",{src:c,className:"w-full",style:{minHeight:e?"80vh":"400px"},title:"계약서"}):(0,t.jsxs)("div",{className:"relative",ref:e?void 0:g,style:{aspectRatio:"210/297"},children:[(0,t.jsx)("img",{src:c,alt:"계약서",className:"absolute inset-0 w-full h-full object-fill",onError:()=>u(!0)}),(0,t.jsxs)("div",{className:"absolute inset-0",children:[o.template?.fields?.filter(e=>"signature"!==e.fieldType&&(e.positionX>0||e.positionY>0)).map(e=>{let s=p[e.id];return s?(0,t.jsx)("div",{className:"absolute flex items-center",style:{left:`${e.positionX}%`,top:`${e.positionY}%`,width:`${e.width}%`,height:`${e.height}%`},children:"checkbox"===e.fieldType?(0,t.jsx)("span",{className:"text-gray-900",style:{fontSize:"clamp(10px, 1.2vw, 16px)"},children:"true"===s?"☑":"☐"}):(0,t.jsx)("span",{className:"text-gray-900 font-medium truncate",style:{fontSize:"clamp(6px, 1vw, 12px)"},children:"number"!==e.fieldType&&"amount"!==e.fieldType||isNaN(Number(s))?s:Number(s).toLocaleString("ko-KR")})},e.id):null}),y&&v&&(v.positionX>0||v.positionY>0)&&(0,t.jsx)("div",{className:"absolute",style:{left:`${v.positionX}%`,top:`${v.positionY}%`,width:`${v.width}%`,height:`${v.height}%`},children:(0,t.jsx)("img",{src:y,alt:"서명",className:"w-full h-full object-contain"})})]})]});return"signed"===o.status||o.status,(0,t.jsxs)(t.Fragment,{children:[c&&!d&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"계약서 미리보기"}),(0,t.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700",children:[(0,t.jsx)(r.ZoomIn,{className:"w-3.5 h-3.5"}),"크게 보기"]})]}),(0,t.jsx)("div",{className:"relative rounded-xl border border-gray-200 overflow-hidden cursor-pointer",onClick:()=>m(!0),children:w(!1)})]}),y&&(!v||!c)&&(0,t.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 p-4 mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"전자서명"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 flex justify-center",children:(0,t.jsx)("img",{src:y,alt:"서명",className:"max-h-24 object-contain"})})]}),(o.signedPdfFileId||c&&!d&&o.template?.fileType!=="pdf")&&(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[o.signedPdfFileId&&(0,t.jsxs)(a.default,{fullWidth:!0,size:"lg",onClick:()=>{o.signedPdfFileId&&window.open(`${n.API_BASE_URL}/files/${o.signedPdfFileId}/download`,"_blank")},children:[(0,t.jsx)(i.Download,{className:"w-4 h-4 mr-2"}),"계약서 PDF 다운로드"]}),c&&!d&&o.template?.fileType!=="pdf"&&(0,t.jsxs)(a.default,{fullWidth:!0,size:"lg",variant:"secondary",onClick:b,loading:f,children:[(0,t.jsx)(i.Download,{className:"w-4 h-4 mr-2"}),"계약서 이미지 다운로드"]})]}),h&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:()=>m(!1),children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors z-10",children:(0,t.jsx)(l.X,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("div",{className:"max-w-4xl max-h-[90vh] overflow-auto m-4",onClick:e=>e.stopPropagation(),children:w(!0)})]})]})}e.s(["default",()=>o])},74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},28835,e=>{"use strict";let t,s;var r,l,i,a,n,o=e.i(71645),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,f=(e,t)=>{for(var s in t||(t={}))u.call(t,s)&&m(e,s,t[s]);if(d)for(var s of d(t))h.call(t,s)&&m(e,s,t[s]);return e},x=(e,t)=>{var s={};for(var r in e)u.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&d)for(var r of d(e))0>t.indexOf(r)&&h.call(e,r)&&(s[r]=e[r]);return s};(e=>{let t=class t{constructor(e,s,r,i){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(i<-1||i>7)throw RangeError("Mask value out of range");this.size=4*e+17;let a=[];for(let e=0;e<this.size;e++)a.push(!1);for(let e=0;e<this.size;e++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const n=this.addEccAndInterleave(r);if(this.drawCodewords(n),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const s=this.getPenaltyScore();s<e&&(i=t,e=s),this.applyMask(t)}}l(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(s,r){let l=e.QrSegment.makeSegments(s);return t.encodeSegments(l,r)}static encodeBinary(s,r){let l=e.QrSegment.makeBytes(s);return t.encodeSegments([l],r)}static encodeSegments(e,r,i=1,n=40,o=-1,c=!0){let d,u;if(!(t.MIN_VERSION<=i&&i<=n&&n<=t.MAX_VERSION)||o<-1||o>7)throw RangeError("Invalid value");for(d=i;;d++){let s=8*t.getNumDataCodewords(d,r),l=a.getTotalBits(e,d);if(l<=s){u=l;break}if(d>=n)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&u<=8*t.getNumDataCodewords(d,e)&&(r=e);let h=[];for(let t of e)for(let e of(s(t.mode.modeBits,4,h),s(t.numChars,t.mode.numCharCountBits(d),h),t.getData()))h.push(e);l(h.length==u);let m=8*t.getNumDataCodewords(d,r);l(h.length<=m),s(0,Math.min(4,m-h.length),h),s(0,(8-h.length%8)%8,h),l(h.length%8==0);for(let e=236;h.length<m;e^=253)s(e,8,h);let f=[];for(;8*f.length<h.length;)f.push(0);return h.forEach((e,t)=>f[t>>>3]|=e<<7-(7&t)),new t(d,r,f,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let r=0;r<t;r++)(0!=s||0!=r)&&(0!=s||r!=t-1)&&(s!=t-1||0!=r)&&this.drawAlignmentPattern(e[s],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,s=t;for(let e=0;e<10;e++)s=s<<1^(s>>>9)*1335;let i=(t<<10|s)^21522;l(i>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,r(i,e));this.setFunctionModule(8,7,r(i,6)),this.setFunctionModule(8,8,r(i,7)),this.setFunctionModule(7,8,r(i,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,r(i,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,r(i,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,r(i,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;l(t>>>18==0);for(let e=0;e<18;e++){let s=r(t,e),l=this.size-11+e%3,i=Math.floor(e/3);this.setFunctionModule(l,i,s),this.setFunctionModule(i,l,s)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let r=-4;r<=4;r++){let l=Math.max(Math.abs(r),Math.abs(s)),i=e+r,a=t+s;0<=i&&i<this.size&&0<=a&&a<this.size&&this.setFunctionModule(i,a,2!=l&&4!=l)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+s,1!=Math.max(Math.abs(r),Math.abs(s)))}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){let s=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(s,r))throw RangeError("Invalid argument");let i=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][s],a=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][s],n=Math.floor(t.getNumRawDataModules(s)/8),o=i-n%i,c=Math.floor(n/i),d=[],u=t.reedSolomonComputeDivisor(a);for(let s=0,r=0;s<i;s++){let l=e.slice(r,r+c-a+(s<o?0:1));r+=l.length;let i=t.reedSolomonComputeRemainder(l,u);s<o&&l.push(0),d.push(l.concat(i))}let h=[];for(let e=0;e<d[0].length;e++)d.forEach((t,s)=>{(e!=c-a||s>=o)&&h.push(t[e])});return l(h.length==n),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let l=0;l<this.size;l++)for(let i=0;i<2;i++){let a=t-i,n=(t+1&2)==0?this.size-1-l:l;!this.isFunction[n][a]&&s<8*e.length&&(this.modules[n][a]=r(e[s>>>3],7-(7&s)),s++)}}l(s==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let r;switch(e){case 0:r=(s+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=s%3==0;break;case 3:r=(s+t)%3==0;break;case 4:r=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:r=s*t%2+s*t%3==0;break;case 6:r=(s*t%2+s*t%3)%2==0;break;case 7:r=((s+t)%2+s*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][s]&&r&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let r=!1,l=0,i=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[s][a]==r?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,i),r||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),r=this.modules[s][a],l=1);e+=this.finderPenaltyTerminateAndCount(r,l,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let r=!1,l=0,i=[0,0,0,0,0,0,0];for(let a=0;a<this.size;a++)this.modules[a][s]==r?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,i),r||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),r=this.modules[a][s],l=1);e+=this.finderPenaltyTerminateAndCount(r,l,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let r=0;r<this.size-1;r++){let l=this.modules[s][r];l==this.modules[s][r+1]&&l==this.modules[s+1][r]&&l==this.modules[s+1][r+1]&&(e+=t.PENALTY_N2)}let s=0;for(let e of this.modules)s=e.reduce((e,t)=>e+ +!!t,s);let r=this.size*this.size,i=Math.ceil(Math.abs(20*s-10*r)/r)-1;return l(0<=i&&i<=9),l(0<=(e+=i*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),s=[6];for(let r=this.size-7;s.length<e;r-=t)s.splice(1,0,r);return s}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return l(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let s=[];for(let t=0;t<e-1;t++)s.push(0);s.push(1);let r=1;for(let l=0;l<e;l++){for(let e=0;e<s.length;e++)s[e]=t.reedSolomonMultiply(s[e],r),e+1<s.length&&(s[e]^=s[e+1]);r=t.reedSolomonMultiply(r,2)}return s}static reedSolomonComputeRemainder(e,s){let r=s.map(e=>0);for(let l of e){let e=l^r.shift();r.push(0),s.forEach((s,l)=>r[l]^=t.reedSolomonMultiply(s,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let s=0;for(let r=7;r>=0;r--)s=s<<1^(s>>>7)*285^(t>>>r&1)*e;return l(s>>>8==0),s}finderPenaltyCountPatterns(e){let t=e[1];l(t<=3*this.size);let s=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(s&&e[0]>=4*t&&e[6]>=t?1:0)+(s&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function s(e,t,s){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let r=t-1;r>=0;r--)s.push(e>>>r&1)}function r(e,t){return(e>>>t&1)!=0}function l(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let i=class e{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let r=[];for(let e of t)s(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){let l=Math.min(t.length-e,3);s(parseInt(t.substring(e,e+l),10),3*l+1,r),e+=l}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){let r;if(!e.isAlphanumeric(t))throw RangeError("String contains unencodable characters in alphanumeric mode");let l=[];for(r=0;r+2<=t.length;r+=2){let i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));s(i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),11,l)}return r<t.length&&s(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,l),new e(e.Mode.ALPHANUMERIC,t.length,l)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw RangeError("ECI assignment value out of range");if(t<128)s(t,8,r);else if(t<16384)s(2,2,r),s(t,14,r);else if(t<1e6)s(6,3,r),s(t,21,r);else throw RangeError("ECI assignment value out of range");return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(let r of e){let e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;s+=4+e+r.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substring(s+1,s+3),16)),s+=2);return t}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;e.QrSegment=i})(n||(n={})),l=(r=n||(n={})).QrCode||(r.QrCode={}),(t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),l.Ecc=t,a=(i=n||(n={})).QrSegment||(i.QrSegment={}),(s=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),a.Mode=s;var g=n,p={L:g.QrCode.Ecc.LOW,M:g.QrCode.Ecc.MEDIUM,Q:g.QrCode.Ecc.QUARTILE,H:g.QrCode.Ecc.HIGH},y="#FFFFFF",v="#000000";function N(e,t=0){let s=[];return e.forEach(function(e,r){let l=null;e.forEach(function(i,a){if(!i&&null!==l){s.push(`M${l+t} ${r+t}h${a-l}v1H${l+t}z`),l=null;return}if(a===e.length-1){if(!i)return;null===l?s.push(`M${a+t},${r+t} h1v1H${a+t}z`):s.push(`M${l+t},${r+t} h${a+1-l}v1H${l+t}z`);return}i&&null===l&&(l=a)})}),s.join("")}function b(e,t){return e.slice().map((e,s)=>s<t.y||s>=t.y+t.h?e:e.map((e,s)=>(s<t.x||s>=t.x+t.w)&&e))}function w({value:e,level:t,minVersion:s,includeMargin:r,marginSize:l,imageSettings:i,size:a,boostLevel:n}){let c=o.default.useMemo(()=>{let r=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...g.QrSegment.makeSegments(t)),e),[]);return g.QrCode.encodeSegments(r,p[t],s,void 0,void 0,n)},[e,t,s,n]),{cells:d,margin:u,numCells:h,calculatedImageSettings:m}=o.default.useMemo(()=>{let e=c.getModules(),t=null!=l?Math.max(Math.floor(l),0):4*!!r,s=e.length+2*t,n=function(e,t,s,r){if(null==r)return null;let l=e.length+2*s,i=Math.floor(.1*t),a=l/t,n=(r.width||i)*a,o=(r.height||i)*a,c=null==r.x?e.length/2-n/2:r.x*a,d=null==r.y?e.length/2-o/2:r.y*a,u=null==r.opacity?1:r.opacity,h=null;if(r.excavate){let e=Math.floor(c),t=Math.floor(d),s=Math.ceil(n+c-e),r=Math.ceil(o+d-t);h={x:e,y:t,w:s,h:r}}return{x:c,y:d,h:o,w:n,excavation:h,opacity:u,crossOrigin:r.crossOrigin}}(e,a,t,i);return{cells:e,margin:t,numCells:s,calculatedImageSettings:n}},[c,a,i,r,l]);return{qrcode:c,margin:u,cells:d,numCells:h,calculatedImageSettings:m}}var j=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();o.default.forwardRef(function(e,t){let{value:s,size:r=128,level:l="L",bgColor:i=y,fgColor:a=v,includeMargin:n=!1,minVersion:c=1,boostLevel:d,marginSize:u,imageSettings:h}=e,m=x(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=m,p=x(m,["style"]),C=null==h?void 0:h.src,E=o.default.useRef(null),M=o.default.useRef(null),R=o.default.useCallback(e=>{E.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[A,k]=o.default.useState(!1),{margin:S,cells:P,numCells:I,calculatedImageSettings:z}=w({value:s,level:l,minVersion:c,boostLevel:d,includeMargin:n,marginSize:u,imageSettings:h,size:r});o.default.useEffect(()=>{if(null!=E.current){let e=E.current,t=e.getContext("2d");if(!t)return;let s=P,l=M.current,n=null!=z&&null!==l&&l.complete&&0!==l.naturalHeight&&0!==l.naturalWidth;n&&null!=z.excavation&&(s=b(P,z.excavation));let o=window.devicePixelRatio||1;e.height=e.width=r*o;let c=r/I*o;t.scale(c,c),t.fillStyle=i,t.fillRect(0,0,I,I),t.fillStyle=a,j?t.fill(new Path2D(N(s,S))):P.forEach(function(e,s){e.forEach(function(e,r){e&&t.fillRect(r+S,s+S,1,1)})}),z&&(t.globalAlpha=z.opacity),n&&t.drawImage(l,z.x+S,z.y+S,z.w,z.h)}}),o.default.useEffect(()=>{k(!1)},[C]);let O=f({height:r,width:r},g),T=null;return null!=C&&(T=o.default.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{k(!0)},ref:M,crossOrigin:null==z?void 0:z.crossOrigin})),o.default.createElement(o.default.Fragment,null,o.default.createElement("canvas",f({style:O,height:r,width:r,ref:R,role:"img"},p)),T)}).displayName="QRCodeCanvas";var C=o.default.forwardRef(function(e,t){let{value:s,size:r=128,level:l="L",bgColor:i=y,fgColor:a=v,includeMargin:n=!1,minVersion:c=1,boostLevel:d,title:u,marginSize:h,imageSettings:m}=e,g=x(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:p,cells:j,numCells:C,calculatedImageSettings:E}=w({value:s,level:l,minVersion:c,boostLevel:d,includeMargin:n,marginSize:h,imageSettings:m,size:r}),M=j,R=null;null!=m&&null!=E&&(null!=E.excavation&&(M=b(j,E.excavation)),R=o.default.createElement("image",{href:m.src,height:E.h,width:E.w,x:E.x+p,y:E.y+p,preserveAspectRatio:"none",opacity:E.opacity,crossOrigin:E.crossOrigin}));let A=N(M,p);return o.default.createElement("svg",f({height:r,width:r,viewBox:`0 0 ${C} ${C}`,ref:t,role:"img"},g),!!u&&o.default.createElement("title",null,u),o.default.createElement("path",{fill:i,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),o.default.createElement("path",{fill:a,d:A,shapeRendering:"crispEdges"}),R)});C.displayName="QRCodeSVG",e.s(["QRCodeSVG",()=>C])},66679,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(9165),i=e.i(39964),a=e.i(96640),n=e.i(59544),o=e.i(32098),c=e.i(22706),d=e.i(28835),u=e.i(74886),h=e.i(43531);function m({contractNumber:e,qrCode:r,qrCodeUrl:l}){let[a,o]=(0,s.useState)(!1),c=`${window.location.origin}/contract/${r}`;return(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 font-mono mb-1",children:e}),(0,t.jsx)("div",{className:"inline-block p-4 bg-white rounded-xl border border-gray-100 my-3",children:(0,t.jsx)(d.QRCodeSVG,{value:c,size:200,level:"H",includeMargin:!0,fgColor:"#1a1a1a"})}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"고객에게 이 QR 코드를 보여주세요"}),(0,t.jsx)(n.default,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(c),o(!0),setTimeout(()=>o(!1),2e3)},children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Check,{className:"w-3.5 h-3.5 mr-1"})," 복사됨"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Copy,{className:"w-3.5 h-3.5 mr-1"})," 링크 복사"]})})]})})}var f=e.i(73271),x=e.i(88840),g=e.i(75157),p=e.i(73884),y=e.i(84614),v=e.i(78583),N=e.i(3116);function b(){let{id:e}=(0,r.useParams)(),{toast:d}=(0,x.useToast)(),[u,h]=(0,s.useState)(null),[b,w]=(0,s.useState)(!0),[j,C]=(0,s.useState)(!1),[E,M]=(0,s.useState)(""),[R,A]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[P,I]=(0,s.useState)(null),z=()=>{w(!0),I(null),l.default.get(`/contracts/${e}`).then(e=>{let t=(0,l.extractData)(e);h(t),t.template?.fileId&&l.default.get(`/files/${t.template.fileId}/download`,{responseType:"blob"}).then(e=>{let t=e.data;t.size>0&&S(URL.createObjectURL(t))}).catch(()=>{})}).catch(e=>{e.response?e.response?.status===403?I("이 계약서에 대한 접근 권한이 없습니다."):I("계약서를 불러올 수 없습니다."):I("서버 연결 중입니다. 잠시 후 다시 시도해주세요.")}).finally(()=>w(!1))};(0,s.useEffect)(()=>{z()},[e]);let O=async()=>{if(!E.trim())return void d("취소 사유를 입력해주세요.","error");A(!0);try{await l.default.post(`/contracts/${e}/cancel`,{reason:E}),d("계약이 취소되었습니다.","success"),C(!1),z()}catch{d("취소에 실패했습니다.","error")}finally{A(!1)}};if(b)return(0,t.jsxs)("div",{children:[(0,t.jsx)(c.default,{title:"계약 상세",backHref:"/partner/events"}),(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-32 bg-white rounded-2xl animate-pulse"},e))})]});if(!u)return(0,t.jsxs)("div",{children:[(0,t.jsx)(c.default,{title:"계약 상세",backHref:"/partner/events"}),(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-500 mb-3",children:P||"계약서를 찾을 수 없습니다"}),P&&(0,t.jsx)(n.default,{variant:"outline",size:"sm",onClick:z,children:"다시 시도"})]})})]});let T="completed"!==u.status&&"cancelled"!==u.status;return(0,t.jsxs)("div",{children:[(0,t.jsx)(c.default,{title:"계약 상세",backHref:`/partner/events/${u.eventId}`,actions:T?(0,t.jsxs)(n.default,{variant:"danger",size:"sm",onClick:()=>C(!0),children:[(0,t.jsx)(p.XCircle,{className:"w-4 h-4 mr-1"})," 취소"]}):void 0}),(0,t.jsx)(i.default,{className:"mb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 font-mono",children:u.contractNumber}),(0,t.jsx)(a.default,{status:u.status})]}),(0,t.jsx)("div",{className:"text-right text-xs text-gray-400",children:(0,t.jsx)("p",{children:(0,g.formatDateTime)(u.createdAt)})})]})}),("pending"===u.status||"in_progress"===u.status)&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(m,{contractNumber:u.contractNumber,qrCode:u.qrCode,qrCodeUrl:u.qrCodeUrl||""})}),(0,t.jsx)(f.default,{contract:u,templateImageUrl:k}),(0,t.jsxs)(i.default,{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"계약 정보"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(v.FileText,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"이벤트"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:u.event?.name||"-"})]})]}),u.customer&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(y.User,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"고객"}),(0,t.jsxs)("p",{className:"text-sm font-medium",children:[u.customer.name," (",u.customer.email,")"]})]})]}),u.totalAmount&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(v.FileText,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"금액"}),(0,t.jsx)("p",{className:"text-sm font-bold text-blue-600",children:(0,g.formatCurrency)(u.totalAmount)})]})]}),u.expiresAt&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(N.Clock,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"만료일"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:(0,g.formatDateTime)(u.expiresAt)})]})]})]})]}),u.fieldValues&&u.fieldValues.length>0&&(0,t.jsxs)(i.default,{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"입력 내용"}),(0,t.jsx)("div",{className:"space-y-2",children:u.fieldValues.map(e=>{let s=u.template?.fields?.find(t=>t.id===e.fieldId);return(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:s?.label||e.field?.label||"항목"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.value})]},e.id)})})]}),u.histories&&u.histories.length>0&&(0,t.jsxs)(i.default,{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"이력"}),(0,t.jsx)("div",{className:"space-y-2",children:u.histories.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(a.default,{status:e.toStatus}),(0,t.jsx)("span",{className:"text-gray-400",children:(0,g.formatDateTime)(e.createdAt)}),e.reason&&(0,t.jsxs)("span",{className:"text-gray-500",children:["- ",e.reason]})]},e.id))})]}),(0,t.jsx)(o.default,{isOpen:j,onClose:()=>C(!1),title:"계약 취소",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"이 계약을 취소하시겠습니까?"}),(0,t.jsx)("textarea",{placeholder:"취소 사유를 입력하세요",value:E,onChange:e=>M(e.target.value),className:"w-full border border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(n.default,{variant:"outline",onClick:()=>C(!1),children:"닫기"}),(0,t.jsx)(n.default,{variant:"danger",onClick:O,loading:R,disabled:!E.trim(),children:"취소하기"})]})]})})]})}e.s(["default",()=>b],66679)},17571,e=>{e.v(t=>Promise.all(["static/chunks/966f7dc49aa0dad9.js"].map(t=>e.l(t))).then(()=>t(66459)))}]);