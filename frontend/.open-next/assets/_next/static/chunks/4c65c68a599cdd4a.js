(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(75157);let l=(0,a.forwardRef)(({className:e,variant:a="primary",size:l="md",fullWidth:r,loading:i,disabled:n,children:d,...c},o)=>(0,s.jsxs)("button",{ref:o,className:(0,t.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-400",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400 shadow-md"}[a],{sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[l],r&&"w-full",e),disabled:n||i,...c,children:[i&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]}));l.displayName="Button",e.s(["default",0,l])},39964,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(75157);let l=(0,a.forwardRef)(({className:e,hoverable:a,padding:l="md",children:r,...i},n)=>(0,s.jsx)("div",{ref:n,className:(0,t.cn)("bg-white rounded-2xl border border-gray-100","shadow-sm",{none:"",sm:"p-4",md:"p-5",lg:"p-6"}[l],a&&"hover:shadow-md hover:border-gray-200 transition-all duration-200 cursor-pointer",e),...i,children:r}));l.displayName="Card",e.s(["default",0,l])},22706,e=>{"use strict";var s=e.i(43476);let a=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var t=e.i(18566);function l({title:e,subtitle:l,backHref:r,actions:i}){let n=(0,t.useRouter)();return(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,s.jsx)("button",{onClick:()=>n.push(r),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(a,{className:"w-5 h-5 text-gray-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e}),l&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:l})]})]}),i&&(0,s.jsx)("div",{className:"flex items-center gap-2",children:i})]})}e.s(["default",()=>l],22706)},96640,e=>{"use strict";var s=e.i(43476),a=e.i(75157);function t({status:e,className:t}){return(0,s.jsx)("span",{className:(0,a.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,a.getStatusColor)(e),t),children:(0,a.getStatusLabel)(e)})}e.s(["default",()=>t])},3812,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(75157);let l=(0,a.forwardRef)(({className:e,label:a,error:l,helperText:r,id:i,...n},d)=>{let c=i||a?.replace(/\s/g,"-").toLowerCase();return(0,s.jsxs)("div",{className:"w-full",children:[a&&(0,s.jsx)("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700 mb-1.5",children:a}),(0,s.jsx)("input",{ref:d,id:c,className:(0,t.cn)("w-full px-4 py-3 rounded-xl border bg-white text-gray-900 text-sm","placeholder:text-gray-400","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",l?"border-red-400 focus:ring-red-400":"border-gray-200 hover:border-gray-300","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed",e),...n}),l&&(0,s.jsx)("p",{className:"mt-1.5 text-sm text-red-500",children:l}),r&&!l&&(0,s.jsx)("p",{className:"mt-1.5 text-sm text-gray-400",children:r})]})});l.displayName="Input",e.s(["default",0,l])},32098,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(75157),l=e.i(37727);function r({isOpen:e,onClose:r,title:i,children:n,size:d="md"}){return((0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:r}),(0,s.jsxs)("div",{className:(0,t.cn)("relative w-full mx-4 bg-white rounded-2xl shadow-xl","animate-in fade-in zoom-in-95 duration-200",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl"}[d]),children:[i&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:i}),(0,s.jsx)("button",{onClick:r,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:(0,s.jsx)(l.X,{className:"w-5 h-5 text-gray-400"})})]}),(0,s.jsx)("div",{className:"px-6 py-4",children:n})]})]}):null}e.s(["default",()=>r])},28361,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(9165),r=e.i(39964),i=e.i(59544),n=e.i(3812),d=e.i(96640),c=e.i(32098),o=e.i(22706),u=e.i(88840),x=e.i(75157);function m(){let{id:e}=(0,t.useParams)(),m=(0,t.useRouter)(),{toast:h}=(0,u.useToast)(),[g,b]=(0,a.useState)(null),[f,p]=(0,a.useState)(!0),[j,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[C,z]=(0,a.useState)(null),[S,R]=(0,a.useState)(!1),[T,M]=(0,a.useState)(""),[$,A]=(0,a.useState)(""),[B,H]=(0,a.useState)(""),[O,P]=(0,a.useState)(""),D=()=>{p(!0),l.default.get(`/admin/users/${e}`).then(e=>{let s=(0,l.extractData)(e);b(s),M(s.name),A(s.role),H(s.status),P(s.phone||"")}).catch(()=>h("사용자를 불러올 수 없습니다.","error")).finally(()=>p(!1))};(0,a.useEffect)(()=>{D()},[e]);let W=async()=>{y(!0);try{await l.default.patch(`/admin/users/${e}`,{name:T,role:$,status:B,phone:O}),h("사용자 정보가 수정되었습니다.","success"),D()}catch{h("수정에 실패했습니다.","error")}finally{y(!1)}},E=async()=>{try{await l.default.delete(`/admin/users/${e}`),h("사용자가 삭제되었습니다.","success"),m.push("/admin/users")}catch{h("삭제에 실패했습니다.","error")}},K=async()=>{R(!0);try{let s=await l.default.post(`/admin/users/${e}/reset-password`,{}),a=(0,l.extractData)(s);z(a.temporaryPassword),h("비밀번호가 초기화되었습니다.","success")}catch{h("비밀번호 초기화에 실패했습니다.","error")}finally{R(!1)}},L=async s=>{try{await l.default.patch(`/admin/users/${e}/status`,{status:s}),h("active"===s?"사용자가 활성화되었습니다.":"사용자가 정지되었습니다.","success"),D()}catch{h("상태 변경에 실패했습니다.","error")}},U=async()=>{try{await l.default.patch(`/admin/users/${e}/approve`),h("가입이 승인되었습니다.","success"),D()}catch{h("승인에 실패했습니다.","error")}};return f?(0,s.jsxs)("div",{children:[(0,s.jsx)(o.default,{title:"사용자 상세",backHref:"/admin/users"}),(0,s.jsx)("div",{className:"space-y-4",children:[1,2].map(e=>(0,s.jsx)("div",{className:"h-40 bg-white rounded-2xl animate-pulse"},e))})]}):g?(0,s.jsxs)("div",{children:[(0,s.jsx)(o.default,{title:g.name,subtitle:g.email,backHref:"/admin/users",actions:(0,s.jsxs)("div",{className:"flex gap-2",children:[("pending"===g.status||("partner"===g.role||"organizer"===g.role)&&g.organizationMemberships?.some(e=>e.organization?.status==="pending"))&&(0,s.jsx)(i.default,{size:"sm",onClick:U,children:"가입 승인"}),("partner"===g.role||"organizer"===g.role)&&!g.organizationMemberships?.length&&"active"===g.status&&(0,s.jsx)("span",{className:"text-xs text-yellow-600 bg-yellow-50 px-3 py-1.5 rounded-lg",children:"업체 등록 미완료"}),"active"===g.status&&"admin"!==g.role&&(0,s.jsx)(i.default,{variant:"danger",size:"sm",onClick:()=>L("suspended"),children:"정지"}),"suspended"===g.status&&(0,s.jsx)(i.default,{size:"sm",onClick:()=>L("active"),children:"활성화"})]})}),(0,s.jsxs)(r.default,{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(d.default,{status:g.status}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:["가입일: ",(0,x.formatDateTime)(g.createdAt)]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"이름"}),(0,s.jsx)(n.default,{value:T,onChange:e=>M(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"역할"}),(0,s.jsx)("select",{value:$,onChange:e=>A(e.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"customer",label:"고객"},{value:"partner",label:"협력업체"},{value:"organizer",label:"주관사"},{value:"admin",label:"관리자"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"상태"}),(0,s.jsx)("select",{value:B,onChange:e=>H(e.target.value),className:"w-full border border-gray-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"pending",label:"승인대기"},{value:"active",label:"활성"},{value:"suspended",label:"정지"},{value:"withdrawn",label:"탈퇴"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"연락처"}),(0,s.jsx)(n.default,{value:O,onChange:e=>P(e.target.value),placeholder:"010-0000-0000"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"이메일"}),(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-xl text-sm text-gray-600",children:g.email})]}),g.address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"주소"}),(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 rounded-xl text-sm text-gray-600",children:g.address})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,s.jsx)(i.default,{onClick:W,disabled:j,children:j?"저장 중...":"저장"}),"admin"!==g.role&&(0,s.jsx)(i.default,{variant:"secondary",onClick:()=>{z(null),k(!0)},children:"비밀번호 초기화"})]})]}),g.organizationMemberships&&g.organizationMemberships.length>0&&(0,s.jsxs)(r.default,{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"소속 조직"}),(0,s.jsx)("div",{className:"space-y-2",children:g.organizationMemberships.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.organization?.name||"-"}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.organization?.type," / ",e.role]})]}),(0,s.jsx)(d.default,{status:e.organization?.status||""})]},e.id))})]}),"admin"!==g.role&&(0,s.jsxs)(r.default,{className:"border-red-200",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-red-600 mb-3",children:"위험 영역"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"이 사용자 계정을 삭제합니다. 이 작업은 되돌릴 수 없습니다."}),(0,s.jsx)(i.default,{variant:"danger",onClick:()=>N(!0),children:"계정 삭제"})]}),(0,s.jsxs)(c.default,{isOpen:v,onClose:()=>N(!1),title:"계정 삭제 확인",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["정말로 ",(0,s.jsx)("strong",{children:g.name})," 계정을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(i.default,{variant:"outline",onClick:()=>N(!1),children:"취소"}),(0,s.jsx)(i.default,{variant:"danger",onClick:E,children:"삭제"})]})]}),(0,s.jsx)(c.default,{isOpen:w,onClose:()=>k(!1),title:"비밀번호 초기화",children:C?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"비밀번호가 초기화되었습니다. 아래 임시 비밀번호를 사용자에게 전달해주세요."}),(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-xl border-2 border-blue-200 text-center mb-4",children:[(0,s.jsx)("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"임시 비밀번호"}),(0,s.jsx)("p",{className:"text-2xl font-bold font-mono text-blue-900 tracking-wider select-all",children:C})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mb-4",children:"사용자에게 로그인 후 반드시 비밀번호를 변경하도록 안내하세요."}),(0,s.jsx)(i.default,{fullWidth:!0,onClick:()=>{navigator.clipboard.writeText(C),h("임시 비밀번호가 복사되었습니다.","success")},children:"비밀번호 복사"}),(0,s.jsx)(i.default,{variant:"secondary",fullWidth:!0,className:"mt-2",onClick:()=>k(!1),children:"닫기"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[(0,s.jsx)("strong",{children:g.name}),"의 비밀번호를 초기화하시겠습니까? 임시 비밀번호가 자동 생성됩니다."]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)(i.default,{variant:"outline",onClick:()=>k(!1),children:"취소"}),(0,s.jsx)(i.default,{onClick:K,loading:S,children:"초기화"})]})]})})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(o.default,{title:"사용자 상세",backHref:"/admin/users"}),(0,s.jsx)(r.default,{children:(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"사용자를 찾을 수 없습니다"})})]})}e.s(["default",()=>m])}]);