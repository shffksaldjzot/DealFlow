(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let a=(0,s.forwardRef)(({className:e,variant:s="primary",size:a="md",fullWidth:i,loading:l,disabled:n,children:c,...d},o)=>(0,t.jsxs)("button",{ref:o,className:(0,r.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-45 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-sm focus:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:shadow-sm focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-blue-600 hover:bg-blue-50 focus:ring-blue-500",danger:"bg-error text-white hover:opacity-90 hover:shadow-sm focus:ring-red-400",success:"bg-success text-white hover:opacity-90 hover:shadow-sm focus:ring-success"}[s],{sm:"px-3.5 py-1.5 text-[13px]",md:"px-5 py-2.5 text-sm",lg:"px-7 py-3 text-base",xl:"px-9 py-4 text-lg rounded-xl"}[a],i&&"w-full",e),disabled:n||l,...d,children:[l&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]}));a.displayName="Button",e.s(["default",0,a])},39964,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let a=(0,s.forwardRef)(({className:e,hoverable:s,padding:a="md",children:i,...l},n)=>(0,t.jsx)("div",{ref:n,className:(0,r.cn)("bg-white rounded-xl border border-gray-200","shadow-[0_1px_3px_rgba(0,0,0,0.1),0_1px_2px_rgba(0,0,0,0.06)]",{none:"",sm:"p-4",md:"p-5",lg:"p-6"}[a],s&&"hover:shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1),0_2px_4px_-1px_rgba(0,0,0,0.06)] transition-all duration-200 cursor-pointer",e),...l,children:i}));a.displayName="Card",e.s(["default",0,a])},96640,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function r({status:e,className:r}){return(0,t.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold",(0,s.getStatusColor)(e),r),children:(0,s.getStatusLabel)(e)})}e.s(["default",()=>r])},32098,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157),a=e.i(37727);function i({isOpen:e,onClose:i,title:l,children:n,size:c="md"}){return((0,s.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[rgba(15,23,42,0.5)]",onClick:i}),(0,t.jsxs)("div",{className:(0,r.cn)("relative w-full bg-white rounded-t-xl sm:rounded-xl shadow-[0_20px_25px_-5px_rgba(0,0,0,0.1),0_10px_10px_-5px_rgba(0,0,0,0.04)]","animate-in fade-in zoom-in-95 duration-200","sm:mx-4",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl"}[c]),children:[l&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:l}),(0,t.jsx)("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(a.X,{className:"w-5 h-5 text-gray-400"})})]}),(0,t.jsx)("div",{className:"px-6 py-4",children:n})]})]}):null}e.s(["default",()=>i])},23962,e=>{"use strict";let t=(0,e.i(75254).default)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);e.s(["QrCode",()=>t],23962)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},94039,e=>{"use strict";let t={blue:{bg:"bg-blue-100",hover:"hover:bg-blue-200",title:"text-blue-900",sub:"text-blue-600",badge:"text-blue-700",border:"border-blue-200",iconBg:"bg-blue-50",icon:"text-blue-500"},purple:{bg:"bg-purple-100",hover:"hover:bg-purple-200",title:"text-purple-900",sub:"text-purple-600",badge:"text-purple-700",border:"border-purple-200",iconBg:"bg-purple-50",icon:"text-purple-500"},green:{bg:"bg-green-100",hover:"hover:bg-green-200",title:"text-green-900",sub:"text-green-600",badge:"text-green-700",border:"border-green-200",iconBg:"bg-green-50",icon:"text-green-500"},orange:{bg:"bg-orange-100",hover:"hover:bg-orange-200",title:"text-orange-900",sub:"text-orange-600",badge:"text-orange-700",border:"border-orange-200",iconBg:"bg-orange-50",icon:"text-orange-500"},red:{bg:"bg-red-100",hover:"hover:bg-red-200",title:"text-red-900",sub:"text-red-600",badge:"text-red-700",border:"border-red-200",iconBg:"bg-red-50",icon:"text-red-500"},pink:{bg:"bg-pink-100",hover:"hover:bg-pink-200",title:"text-pink-900",sub:"text-pink-600",badge:"text-pink-700",border:"border-pink-200",iconBg:"bg-pink-50",icon:"text-pink-500"},teal:{bg:"bg-teal-100",hover:"hover:bg-teal-200",title:"text-teal-900",sub:"text-teal-600",badge:"text-teal-700",border:"border-teal-200",iconBg:"bg-teal-50",icon:"text-teal-500"},indigo:{bg:"bg-indigo-100",hover:"hover:bg-indigo-200",title:"text-indigo-900",sub:"text-indigo-600",badge:"text-indigo-700",border:"border-indigo-200",iconBg:"bg-indigo-50",icon:"text-indigo-500"}},s=t.blue;function r(e){return t[e||"blue"]||s}e.s(["getEventColor",()=>r])},8402,e=>{"use strict";let t=(0,e.i(75254).default)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);e.s(["Ticket",()=>t],8402)},98539,e=>{"use strict";var t=e.i(43476),s=e.i(32098),r=e.i(59544);function a({isOpen:e,onClose:a,onConfirm:i,title:l,message:n,confirmText:c="확인",cancelText:d="취소",variant:o="primary",loading:x=!1}){return(0,t.jsxs)(s.default,{isOpen:e,onClose:a,title:l,size:"sm",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-6",children:n}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(r.default,{variant:"secondary",onClick:a,disabled:x,children:d}),(0,t.jsx)(r.default,{variant:"danger"===o?"danger":"primary",onClick:i,loading:x,children:c})]})]})}e.s(["default",()=>a])},623,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(92028),i=e.i(9165),l=e.i(39964),n=e.i(96640),c=e.i(59544),d=e.i(98539),o=e.i(63059),x=e.i(63209),m=e.i(37727),u=e.i(73884),h=e.i(23962),g=e.i(87316),p=e.i(7486),b=e.i(8402),f=e.i(75157),v=e.i(94039),j=e.i(88840);function y(){let{user:y}=(0,a.useAuthStore)(),N=(0,r.useRouter)(),{toast:w}=(0,j.useToast)(),[k,C]=(0,s.useState)([]),[_,B]=(0,s.useState)([]),[M,z]=(0,s.useState)([]),[A,R]=(0,s.useState)(!0),[S,$]=(0,s.useState)(""),[T,q]=(0,s.useState)(!1),D=(0,s.useRef)(null),[E,P]=(0,s.useState)(null),[Q,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{Promise.all([i.default.get("/customer/contracts").then(e=>C((0,i.extractData)(e))).catch(()=>{}),i.default.get("/ic/contracts/my").then(e=>B((0,i.extractData)(e))).catch(()=>{}),i.default.get("/event-visits/my").then(e=>z((0,i.extractData)(e))).catch(()=>{})]).finally(()=>R(!1))},[]);let H=async()=>{if(E){O(!0);try{await i.default.post(`/customer/contracts/${E.id}/cancel`),w("계약이 취소되었습니다.","success"),i.default.get("/customer/contracts").then(e=>C((0,i.extractData)(e))).catch(()=>{}),i.default.get("/ic/contracts/my").then(e=>B((0,i.extractData)(e))).catch(()=>{})}catch{w("취소에 실패했습니다.","error")}finally{O(!1),P(null)}}},K=k.filter(e=>"pending"===e.status||"in_progress"===e.status),U=()=>{let e=S.trim().replace(/\s/g,"");e.length>=4&&N.push(`/events/${e}/visit`)},X=(0,s.useCallback)(async()=>{if(D.current){try{await D.current.stop(),D.current.clear()}catch{}D.current=null}q(!1)},[]),I=async()=>{q(!0);let{Html5Qrcode:t}=await e.A(87087);setTimeout(async()=>{if(!document.getElementById("qr-reader"))return;let e=new t("qr-reader");D.current=e;try{await e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},t=>{let s=t,r=t.match(/\/contract\/([^/?\s]+)/);r&&(s=r[1]);let a=t.match(/\/events\/([^/?\s]+)\/(visit|join|options)/);if(a){e.stop().catch(()=>{}),D.current=null,q(!1),N.push(`/events/${a[1]}/${a[2]}`);return}e.stop().catch(()=>{}),D.current=null,q(!1),N.push(`/contract/${s}`)},()=>{})}catch{q(!1),w("카메라를 사용할 수 없습니다.","error")}},100)};return(0,s.useEffect)(()=>()=>{D.current&&D.current.stop().catch(()=>{})},[]),(0,t.jsxs)("div",{children:[T&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black",children:(0,t.jsxs)("div",{className:"relative h-full flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 pt-[calc(16px+env(safe-area-inset-top))]",children:[(0,t.jsx)("h3",{className:"text-white font-bold text-lg",children:"QR 코드 스캔"}),(0,t.jsx)("button",{onClick:X,className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:(0,t.jsx)(m.X,{className:"w-6 h-6 text-white"})})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:[(0,t.jsx)("div",{id:"qr-reader",className:"rounded-xl overflow-hidden"}),(0,t.jsx)("p",{className:"text-white/70 text-sm text-center mt-4",children:"방문 코드 QR을 스캔하세요"})]})})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-gray-800",children:["안녕하세요. ",y?.name||"고객","님"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"입주를 축하드립니다."})]}),(0,t.jsx)("div",{onClick:I,className:"mb-5 bg-gradient-to-r from-[#1B3460] to-[#2E4A7A] rounded-2xl p-5 text-white cursor-pointer active:scale-[0.98] transition-transform",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-xl bg-white/20 flex items-center justify-center shrink-0",children:(0,t.jsx)(h.QrCode,{className:"w-7 h-7"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:"QR 코드 스캔"}),(0,t.jsx)("p",{className:"text-sm text-white/70 mt-0.5",children:"방문 코드를 스캔하여 입장하세요"})]}),(0,t.jsx)(o.ChevronRight,{className:"w-5 h-5 text-white/50"})]})}),(0,t.jsxs)(l.default,{className:"mb-5",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"방문 코드로 입장하기"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:S,onChange:e=>$(e.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"")),onKeyDown:e=>"Enter"===e.key&&U(),placeholder:"8자리 코드 입력",maxLength:20,autoComplete:"off",autoCorrect:"off",autoCapitalize:"characters",spellCheck:!1,className:"flex-1 px-3.5 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono tracking-widest min-h-[44px] text-center"}),(0,t.jsx)(c.default,{onClick:U,disabled:S.trim().length<4,children:"입장"})]})]}),!A&&M.filter(e=>"reserved"===e.status).length>0&&(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"참여 행사"}),(0,t.jsx)("div",{className:"space-y-2",children:M.filter(e=>"reserved"===e.status).map(e=>{let s=e.event;if(!s)return null;let r=(0,v.getEventColor)(s.themeColor),a=_.find(e=>e.config?.event?.id===s.id||e.config?.eventId===s.id);return(0,t.jsx)(l.default,{hoverable:!0,onClick:()=>{a?N.push(`/customer/integrated-contracts/${a.id}`):N.push(`/events/${s.inviteCode}/options`)},children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-xl ${r.iconBg} flex items-center justify-center shrink-0`,children:(0,t.jsx)(b.Ticket,{className:`w-5 h-5 ${r.icon}`})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-800 text-sm truncate",children:s.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[s.organizer?.name&&(0,t.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,t.jsx)(p.Building2,{className:"w-3 h-3"}),s.organizer.name]}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,t.jsx)(g.Calendar,{className:"w-3 h-3"}),(0,f.formatDate)(e.visitDate)]})]}),a?(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1.5",children:[(0,t.jsx)(n.default,{status:a.status}),(0,t.jsx)("span",{className:"text-xs font-medium text-blue-600",children:(0,f.formatCurrency)(a.totalAmount)})]}):(0,t.jsx)("p",{className:"text-xs text-blue-600 font-medium mt-1.5",children:"옵션 선택 →"})]}),(0,t.jsx)(o.ChevronRight,{className:"w-4 h-4 text-gray-300 shrink-0 mt-1"})]})},e.id)})})]}),!A&&K.length>0&&(0,t.jsxs)("div",{className:"mb-4 flex items-start gap-3 px-4 py-3.5 bg-warning-light border border-amber-200 rounded-xl",children:[(0,t.jsx)(x.AlertCircle,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-amber-900",children:["서명 대기 ",K.length,"건"]}),(0,t.jsx)("p",{className:"text-[13px] text-amber-700 mt-0.5",children:"아래 계약서를 확인하고 서명해주세요"})]})]}),!A&&K.length>0&&(0,t.jsx)("div",{className:"space-y-2.5 mb-5",children:K.map(e=>(0,t.jsx)(l.default,{hoverable:!0,onClick:()=>N.push(`/customer/contracts/${e.id}`),className:"border-l-[3px] border-l-warning",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-800 text-sm truncate",children:e.event?.name||"계약서"}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 mt-0.5",children:[e.partner?.name,e.partner?.items&&(0,t.jsxs)("span",{className:"text-gray-400 ml-1",children:["· ",e.partner.items.split(",").map(e=>e.trim()).join(", ")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1.5",children:[(0,t.jsx)(n.default,{status:e.status}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:(0,f.formatDateTime)(e.createdAt)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0 ml-2",children:[(0,t.jsx)("button",{onClick:t=>{var s;return s=e.id,void(t.stopPropagation(),P({id:s}))},className:"p-2 rounded-lg hover:bg-error-light text-gray-400 hover:text-error transition-colors min-w-[36px] min-h-[36px] flex items-center justify-center",title:"취소",children:(0,t.jsx)(u.XCircle,{className:"w-4 h-4"})}),(0,t.jsx)(c.default,{size:"sm",onClick:t=>{t.stopPropagation(),N.push(`/customer/contracts/${e.id}`)},children:"서명"})]})]})},e.id))}),!A&&_.length>0&&(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"최근 통합 계약"}),_.length>3&&(0,t.jsx)("button",{onClick:()=>N.push("/customer/integrated-contracts"),className:"text-xs text-blue-600 font-medium",children:"더보기 →"})]}),(0,t.jsx)("div",{className:"space-y-2",children:_.slice(0,3).map(e=>(0,t.jsx)(l.default,{hoverable:!0,onClick:()=>N.push(`/customer/integrated-contracts/${e.id}`),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.default,{status:e.status}),(0,t.jsx)("span",{className:"text-xs font-mono text-gray-400",children:e.shortCode})]}),(0,t.jsx)("p",{className:"font-medium text-gray-800 text-sm mt-0.5 truncate",children:e.config?.event?.name||"통합계약서"})]}),(0,t.jsx)("div",{className:"text-right flex-shrink-0 ml-3",children:(0,t.jsx)("p",{className:"font-bold text-blue-600 text-sm",children:(0,f.formatCurrency)(e.totalAmount)})})]})},e.id))})]}),(0,t.jsx)(d.default,{isOpen:!!E,onClose:()=>P(null),onConfirm:H,title:"계약 취소",message:"이 계약을 취소하시겠습니까? 취소 후에는 되돌릴 수 없습니다.",confirmText:"계약 취소",variant:"danger",loading:Q})]})}e.s(["default",()=>y])},87087,e=>{e.v(t=>Promise.all(["static/chunks/1c9ffce5dd967e02.js"].map(t=>e.l(t))).then(()=>t(5003)))}]);