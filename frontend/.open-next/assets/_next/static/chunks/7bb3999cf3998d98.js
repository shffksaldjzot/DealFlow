(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let l=(0,s.forwardRef)(({className:e,variant:s="primary",size:l="md",fullWidth:r,loading:n,disabled:i,children:c,...d},x)=>(0,t.jsxs)("button",{ref:x,className:(0,a.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-400",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400 shadow-md"}[s],{sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[l],r&&"w-full",e),disabled:i||n,...d,children:[n&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]}));l.displayName="Button",e.s(["default",0,l])},39964,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75157);let l=(0,s.forwardRef)(({className:e,hoverable:s,padding:l="md",children:r,...n},i)=>(0,t.jsx)("div",{ref:i,className:(0,a.cn)("bg-white rounded-2xl border border-gray-100","shadow-sm",{none:"",sm:"p-4",md:"p-5",lg:"p-6"}[l],s&&"hover:shadow-md hover:border-gray-200 transition-all duration-200 cursor-pointer",e),...n,children:r}));l.displayName="Card",e.s(["default",0,l])},22706,e=>{"use strict";var t=e.i(43476);let s=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var a=e.i(18566);function l({title:e,subtitle:l,backHref:r,actions:n}){let i=(0,a.useRouter)();return(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,t.jsx)("button",{onClick:()=>i.push(r),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(s,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e}),l&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:l})]})]}),n&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:n})]})}e.s(["default",()=>l],22706)},96640,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({status:e,className:a}){return(0,t.jsx)("span",{className:(0,s.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,s.getStatusColor)(e),a),children:(0,s.getStatusLabel)(e)})}e.s(["default",()=>a])},14670,e=>{"use strict";var t=e.i(43476);let s=(0,e.i(75254).default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);function a({icon:e,title:a,description:l,action:r}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e||(0,t.jsx)(s,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:a}),l&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4 max-w-sm",children:l}),r]})}e.s(["default",()=>a],14670)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},18124,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(9165),r=e.i(88840),n=e.i(59544),i=e.i(39964),c=e.i(96640),d=e.i(22706),x=e.i(14670),o=e.i(95468),m=e.i(73884),h=e.i(75254);let u=(0,h.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var p=e.i(87316),g=e.i(43432),y=e.i(63488);let f=(0,h.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),j=(0,h.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var b=e.i(75157);let N=[{key:"all",label:"전체"},{key:"pending",label:"승인대기"},{key:"approved",label:"승인됨"},{key:"rejected",label:"거절"},{key:"cancelled",label:"취소"}];function v(){let{id:e}=(0,a.useParams)(),{toast:h}=(0,r.useToast)(),[v,w]=(0,s.useState)("partners"),[k,C]=(0,s.useState)([]),[S,z]=(0,s.useState)(!0),[A,M]=(0,s.useState)("all"),[$,R]=(0,s.useState)(null),[I,P]=(0,s.useState)(""),[H,T]=(0,s.useState)(null),[B,D]=(0,s.useState)(!1),[E,L]=(0,s.useState)(null),[q,F]=(0,s.useState)(!1),K=()=>{l.default.get(`/events/${e}/partners`).then(e=>C((0,l.extractData)(e))).catch(()=>{}).finally(()=>z(!1))},O=()=>{D(!0),l.default.get(`/events/${e}/settlement`).then(e=>T((0,l.extractData)(e))).catch(()=>h("정산 데이터를 불러올 수 없습니다.","error")).finally(()=>D(!1))};(0,s.useEffect)(()=>{K()},[e]),(0,s.useEffect)(()=>{"settlement"!==v||H||O()},[v]);let U=async(t,s)=>{try{await l.default.patch(`/events/${e}/partners/${t}`,{status:s}),h("approved"===s?"승인되었습니다.":"거절되었습니다.","success"),K()}catch{h("처리에 실패했습니다.","error")}},V=async()=>{if($)try{await l.default.patch(`/events/${e}/partners/${$.partnerId}`,{status:"cancelled",cancelReason:I||void 0}),h("승인이 취소되었습니다.","success"),R(null),P(""),K()}catch{h("처리에 실패했습니다.","error")}},W=async()=>{if(!E)return;let t=parseFloat(E.rate);if(isNaN(t)||t<0||t>100)return void h("수수료율은 0~100 사이의 숫자를 입력하세요.","error");F(!0);try{await l.default.patch(`/events/${e}/partners/${E.partnerId}/commission`,{commissionRate:t}),h("수수료율이 변경되었습니다.","success"),L(null),O()}catch{h("수수료율 변경에 실패했습니다.","error")}finally{F(!1)}},X="all"===A?k:k.filter(e=>e.status===A);return(0,t.jsxs)("div",{children:[(0,t.jsx)(d.default,{title:"협력업체 관리",subtitle:"참여 신청한 협력업체를 승인/거절하세요",backHref:`/organizer/events/${e}`}),(0,t.jsxs)("div",{className:"flex gap-1 bg-gray-100 rounded-xl p-1 mb-6",children:[(0,t.jsx)("button",{onClick:()=>w("partners"),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all ${"partners"===v?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"업체 관리"}),(0,t.jsxs)("button",{onClick:()=>w("settlement"),className:`flex-1 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all flex items-center justify-center gap-1 ${"settlement"===v?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[(0,t.jsx)(f,{className:"w-4 h-4"})," 정산"]})]}),"partners"===v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex gap-1 bg-gray-100 rounded-xl p-1 mb-6 overflow-x-auto",children:N.map(e=>{var s;return(0,t.jsxs)("button",{onClick:()=>M(e.key),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${A===e.key?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.label,!S&&(0,t.jsx)("span",{className:`ml-1.5 text-xs px-1.5 py-0.5 rounded-full ${A===e.key?"bg-blue-100 text-blue-600":"bg-gray-200 text-gray-500"}`,children:"all"===(s=e.key)?k.length:k.filter(e=>e.status===s).length})]},e.key)})}),S?(0,t.jsx)("div",{className:"space-y-3",children:[1,2].map(e=>(0,t.jsx)("div",{className:"h-20 bg-white rounded-2xl animate-pulse"},e))}):0===X.length?(0,t.jsx)(x.default,{title:"해당 상태의 업체가 없습니다",description:"all"===A?"초대코드를 공유하여 협력업체를 초대하세요":void 0}):(0,t.jsx)("div",{className:"space-y-3",children:X.map(e=>(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:e.partner?.name||"업체"}),(0,t.jsx)(c.default,{status:e.status})]}),"pending"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.default,{size:"sm",onClick:()=>U(e.partnerId,"approved"),children:[(0,t.jsx)(o.CheckCircle2,{className:"w-4 h-4 mr-1"})," 승인"]}),(0,t.jsxs)(n.default,{size:"sm",variant:"danger",onClick:()=>U(e.partnerId,"rejected"),children:[(0,t.jsx)(m.XCircle,{className:"w-4 h-4 mr-1"})," 거절"]})]}),"approved"===e.status&&(0,t.jsxs)(n.default,{size:"sm",variant:"outline",onClick:()=>R(e),children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-1"})," 승인 취소"]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Calendar,{className:"w-3 h-3"})," 신청일: ",(0,b.formatDate)(e.createdAt)]}),e.approvedAt&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(o.CheckCircle2,{className:"w-3 h-3 text-green-500"})," 승인일: ",(0,b.formatDate)(e.approvedAt)]}),e.partner?.contactPhone&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.Phone,{className:"w-3 h-3"})," ",e.partner.contactPhone]}),e.partner?.contactEmail&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.Mail,{className:"w-3 h-3"})," ",e.partner.contactEmail]})]}),e.cancelReason&&(0,t.jsxs)("p",{className:"text-xs text-red-500",children:["취소 사유: ",e.cancelReason]})]})},e.id))})]}):B?(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-16 bg-white rounded-2xl animate-pulse"},e))}):H?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[(0,t.jsx)(i.default,{padding:"sm",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"총 계약"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[H.totals.contractCount,"건"]})]})}),(0,t.jsx)(i.default,{padding:"sm",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"총 매출"}),(0,t.jsx)("p",{className:"text-xl font-bold text-blue-600",children:(0,b.formatCurrency)(H.totals.totalAmount)})]})}),(0,t.jsx)(i.default,{padding:"sm",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"총 수수료"}),(0,t.jsx)("p",{className:"text-xl font-bold text-green-600",children:(0,b.formatCurrency)(H.totals.totalCommission)})]})})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mb-3",children:["기본 수수료율: ",H.eventCommissionRate,"%"]}),(0,t.jsx)(i.default,{padding:"none",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 font-semibold text-gray-700",children:"업체명"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-semibold text-gray-700",children:"계약건수"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-semibold text-gray-700",children:"총 매출"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-semibold text-gray-700",children:"수수료율"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-semibold text-gray-700",children:"수수료액"})]})}),(0,t.jsx)("tbody",{children:H.partners.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:e.partnerName}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-gray-600",children:e.contractCount}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-gray-900 font-medium",children:(0,b.formatCurrency)(e.totalAmount)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:(0,t.jsxs)("button",{onClick:()=>L({partnerId:e.partnerId,rate:String(e.commissionRate)}),className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800",children:[e.commissionRate,"%",(0,t.jsx)(j,{className:"w-3 h-3"})]})}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:(0,b.formatCurrency)(e.commissionAmount)})]},e.partnerId))}),(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-gray-700",children:"합계"}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-gray-700",children:H.totals.contractCount}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-gray-900",children:(0,b.formatCurrency)(H.totals.totalAmount)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-gray-500",children:"-"}),(0,t.jsx)("td",{className:"px-4 py-3 text-right text-green-700",children:(0,b.formatCurrency)(H.totals.totalCommission)})]})})]})})})]}):(0,t.jsx)(x.default,{title:"정산 데이터를 불러올 수 없습니다"}),$&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"승인 취소"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,t.jsx)("strong",{children:$.partner?.name}),"의 참여 승인을 취소하시겠습니까?"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"취소 사유 (선택)"}),(0,t.jsx)("input",{type:"text",value:I,onChange:e=>P(e.target.value),placeholder:"취소 사유를 입력하세요",className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(n.default,{variant:"secondary",onClick:()=>{R(null),P("")},children:"닫기"}),(0,t.jsx)(n.default,{variant:"danger",onClick:V,children:"승인 취소"})]})]})}),E&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"수수료율 변경"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"수수료율 (%)"}),(0,t.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:E.rate,onChange:e=>L({...E,rate:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(n.default,{variant:"secondary",onClick:()=>L(null),children:"취소"}),(0,t.jsx)(n.default,{onClick:W,loading:q,children:"저장"})]})]})})]})}e.s(["default",()=>v],18124)}]);