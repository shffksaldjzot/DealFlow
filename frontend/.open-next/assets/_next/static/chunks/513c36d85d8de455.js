(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},28835,e=>{"use strict";let t,s;var a,l,r,i,n,o=e.i(71645),c=Object.defineProperty,d=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,s)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,x=(e,t)=>{for(var s in t||(t={}))u.call(t,s)&&h(e,s,t[s]);if(d)for(var s of d(t))m.call(t,s)&&h(e,s,t[s]);return e},p=(e,t)=>{var s={};for(var a in e)u.call(e,a)&&0>t.indexOf(a)&&(s[a]=e[a]);if(null!=e&&d)for(var a of d(e))0>t.indexOf(a)&&m.call(e,a)&&(s[a]=e[a]);return s};(e=>{let t=class t{constructor(e,s,a,r){if(this.version=e,this.errorCorrectionLevel=s,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(r<-1||r>7)throw RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let e=0;e<this.size;e++)i.push(!1);for(let e=0;e<this.size;e++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const n=this.addEccAndInterleave(a);if(this.drawCodewords(n),-1==r){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const s=this.getPenaltyScore();s<e&&(r=t,e=s),this.applyMask(t)}}l(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(s,a){let l=e.QrSegment.makeSegments(s);return t.encodeSegments(l,a)}static encodeBinary(s,a){let l=e.QrSegment.makeBytes(s);return t.encodeSegments([l],a)}static encodeSegments(e,a,r=1,n=40,o=-1,c=!0){let d,u;if(!(t.MIN_VERSION<=r&&r<=n&&n<=t.MAX_VERSION)||o<-1||o>7)throw RangeError("Invalid value");for(d=r;;d++){let s=8*t.getNumDataCodewords(d,a),l=i.getTotalBits(e,d);if(l<=s){u=l;break}if(d>=n)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])c&&u<=8*t.getNumDataCodewords(d,e)&&(a=e);let m=[];for(let t of e)for(let e of(s(t.mode.modeBits,4,m),s(t.numChars,t.mode.numCharCountBits(d),m),t.getData()))m.push(e);l(m.length==u);let h=8*t.getNumDataCodewords(d,a);l(m.length<=h),s(0,Math.min(4,h-m.length),m),s(0,(8-m.length%8)%8,m),l(m.length%8==0);for(let e=236;m.length<h;e^=253)s(e,8,m);let x=[];for(;8*x.length<m.length;)x.push(0);return m.forEach((e,t)=>x[t>>>3]|=e<<7-(7&t)),new t(d,a,x,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let s=0;s<t;s++)for(let a=0;a<t;a++)(0!=s||0!=a)&&(0!=s||a!=t-1)&&(s!=t-1||0!=a)&&this.drawAlignmentPattern(e[s],e[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,s=t;for(let e=0;e<10;e++)s=s<<1^(s>>>9)*1335;let r=(t<<10|s)^21522;l(r>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,a(r,e));this.setFunctionModule(8,7,a(r,6)),this.setFunctionModule(8,8,a(r,7)),this.setFunctionModule(7,8,a(r,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,a(r,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,a(r,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,a(r,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;l(t>>>18==0);for(let e=0;e<18;e++){let s=a(t,e),l=this.size-11+e%3,r=Math.floor(e/3);this.setFunctionModule(l,r,s),this.setFunctionModule(r,l,s)}}drawFinderPattern(e,t){for(let s=-4;s<=4;s++)for(let a=-4;a<=4;a++){let l=Math.max(Math.abs(a),Math.abs(s)),r=e+a,i=t+s;0<=r&&r<this.size&&0<=i&&i<this.size&&this.setFunctionModule(r,i,2!=l&&4!=l)}}drawAlignmentPattern(e,t){for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)this.setFunctionModule(e+a,t+s,1!=Math.max(Math.abs(a),Math.abs(s)))}setFunctionModule(e,t,s){this.modules[t][e]=s,this.isFunction[t][e]=!0}addEccAndInterleave(e){let s=this.version,a=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(s,a))throw RangeError("Invalid argument");let r=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][s],i=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][s],n=Math.floor(t.getNumRawDataModules(s)/8),o=r-n%r,c=Math.floor(n/r),d=[],u=t.reedSolomonComputeDivisor(i);for(let s=0,a=0;s<r;s++){let l=e.slice(a,a+c-i+(s<o?0:1));a+=l.length;let r=t.reedSolomonComputeRemainder(l,u);s<o&&l.push(0),d.push(l.concat(r))}let m=[];for(let e=0;e<d[0].length;e++)d.forEach((t,s)=>{(e!=c-i||s>=o)&&m.push(t[e])});return l(m.length==n),m}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let s=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let l=0;l<this.size;l++)for(let r=0;r<2;r++){let i=t-r,n=(t+1&2)==0?this.size-1-l:l;!this.isFunction[n][i]&&s<8*e.length&&(this.modules[n][i]=a(e[s>>>3],7-(7&s)),s++)}}l(s==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let s=0;s<this.size;s++){let a;switch(e){case 0:a=(s+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=s%3==0;break;case 3:a=(s+t)%3==0;break;case 4:a=(Math.floor(s/3)+Math.floor(t/2))%2==0;break;case 5:a=s*t%2+s*t%3==0;break;case 6:a=(s*t%2+s*t%3)%2==0;break;case 7:a=((s+t)%2+s*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][s]&&a&&(this.modules[t][s]=!this.modules[t][s])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let a=!1,l=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[s][i]==a?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[s][i],l=1);e+=this.finderPenaltyTerminateAndCount(a,l,r)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let a=!1,l=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][s]==a?5==++l?e+=t.PENALTY_N1:l>5&&e++:(this.finderPenaltyAddHistory(l,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[i][s],l=1);e+=this.finderPenaltyTerminateAndCount(a,l,r)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let a=0;a<this.size-1;a++){let l=this.modules[s][a];l==this.modules[s][a+1]&&l==this.modules[s+1][a]&&l==this.modules[s+1][a+1]&&(e+=t.PENALTY_N2)}let s=0;for(let e of this.modules)s=e.reduce((e,t)=>e+ +!!t,s);let a=this.size*this.size,r=Math.ceil(Math.abs(20*s-10*a)/a)-1;return l(0<=r&&r<=9),l(0<=(e+=r*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),s=[6];for(let a=this.size-7;s.length<e;a-=t)s.splice(1,0,a);return s}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let s=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;s-=(25*t-10)*t-55,e>=7&&(s-=36)}return l(208<=s&&s<=29648),s}static getNumDataCodewords(e,s){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let s=[];for(let t=0;t<e-1;t++)s.push(0);s.push(1);let a=1;for(let l=0;l<e;l++){for(let e=0;e<s.length;e++)s[e]=t.reedSolomonMultiply(s[e],a),e+1<s.length&&(s[e]^=s[e+1]);a=t.reedSolomonMultiply(a,2)}return s}static reedSolomonComputeRemainder(e,s){let a=s.map(e=>0);for(let l of e){let e=l^a.shift();a.push(0),s.forEach((s,l)=>a[l]^=t.reedSolomonMultiply(s,e))}return a}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let s=0;for(let a=7;a>=0;a--)s=s<<1^(s>>>7)*285^(t>>>a&1)*e;return l(s>>>8==0),s}finderPenaltyCountPatterns(e){let t=e[1];l(t<=3*this.size);let s=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(s&&e[0]>=4*t&&e[6]>=t?1:0)+(s&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,s){return e&&(this.finderPenaltyAddHistory(t,s),t=0),t+=this.size,this.finderPenaltyAddHistory(t,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function s(e,t,s){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let a=t-1;a>=0;a--)s.push(e>>>a&1)}function a(e,t){return(e>>>t&1)!=0}function l(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let r=class e{constructor(e,t,s){if(this.mode=e,this.numChars=t,this.bitData=s,t<0)throw RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let a=[];for(let e of t)s(e,8,a);return new e(e.Mode.BYTE,t.length,a)}static makeNumeric(t){if(!e.isNumeric(t))throw RangeError("String contains non-numeric characters");let a=[];for(let e=0;e<t.length;){let l=Math.min(t.length-e,3);s(parseInt(t.substring(e,e+l),10),3*l+1,a),e+=l}return new e(e.Mode.NUMERIC,t.length,a)}static makeAlphanumeric(t){let a;if(!e.isAlphanumeric(t))throw RangeError("String contains unencodable characters in alphanumeric mode");let l=[];for(a=0;a+2<=t.length;a+=2){let r=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a));s(r+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a+1)),11,l)}return a<t.length&&s(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(a)),6,l),new e(e.Mode.ALPHANUMERIC,t.length,l)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let a=[];if(t<0)throw RangeError("ECI assignment value out of range");if(t<128)s(t,8,a);else if(t<16384)s(2,2,a),s(t,14,a);else if(t<1e6)s(6,3,a),s(t,21,a);else throw RangeError("ECI assignment value out of range");return new e(e.Mode.ECI,0,a)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let s=0;for(let a of e){let e=a.mode.numCharCountBits(t);if(a.numChars>=1<<e)return 1/0;s+=4+e+a.bitData.length}return s}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let s=0;s<e.length;s++)"%"!=e.charAt(s)?t.push(e.charCodeAt(s)):(t.push(parseInt(e.substring(s+1,s+3),16)),s+=2);return t}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=r;e.QrSegment=r})(n||(n={})),l=(a=n||(n={})).QrCode||(a.QrCode={}),(t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),l.Ecc=t,i=(r=n||(n={})).QrSegment||(r.QrSegment={}),(s=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new s(1,[10,12,14]),s.ALPHANUMERIC=new s(2,[9,11,13]),s.BYTE=new s(4,[8,16,16]),s.KANJI=new s(8,[8,10,12]),s.ECI=new s(7,[0,0,0]),i.Mode=s;var g=n,f={L:g.QrCode.Ecc.LOW,M:g.QrCode.Ecc.MEDIUM,Q:g.QrCode.Ecc.QUARTILE,H:g.QrCode.Ecc.HIGH},y="#FFFFFF",N="#000000";function j(e,t=0){let s=[];return e.forEach(function(e,a){let l=null;e.forEach(function(r,i){if(!r&&null!==l){s.push(`M${l+t} ${a+t}h${i-l}v1H${l+t}z`),l=null;return}if(i===e.length-1){if(!r)return;null===l?s.push(`M${i+t},${a+t} h1v1H${i+t}z`):s.push(`M${l+t},${a+t} h${i+1-l}v1H${l+t}z`);return}r&&null===l&&(l=i)})}),s.join("")}function v(e,t){return e.slice().map((e,s)=>s<t.y||s>=t.y+t.h?e:e.map((e,s)=>(s<t.x||s>=t.x+t.w)&&e))}function b({value:e,level:t,minVersion:s,includeMargin:a,marginSize:l,imageSettings:r,size:i,boostLevel:n}){let c=o.default.useMemo(()=>{let a=(Array.isArray(e)?e:[e]).reduce((e,t)=>(e.push(...g.QrSegment.makeSegments(t)),e),[]);return g.QrCode.encodeSegments(a,f[t],s,void 0,void 0,n)},[e,t,s,n]),{cells:d,margin:u,numCells:m,calculatedImageSettings:h}=o.default.useMemo(()=>{let e=c.getModules(),t=null!=l?Math.max(Math.floor(l),0):4*!!a,s=e.length+2*t,n=function(e,t,s,a){if(null==a)return null;let l=e.length+2*s,r=Math.floor(.1*t),i=l/t,n=(a.width||r)*i,o=(a.height||r)*i,c=null==a.x?e.length/2-n/2:a.x*i,d=null==a.y?e.length/2-o/2:a.y*i,u=null==a.opacity?1:a.opacity,m=null;if(a.excavate){let e=Math.floor(c),t=Math.floor(d),s=Math.ceil(n+c-e),a=Math.ceil(o+d-t);m={x:e,y:t,w:s,h:a}}return{x:c,y:d,h:o,w:n,excavation:m,opacity:u,crossOrigin:a.crossOrigin}}(e,i,t,r);return{cells:e,margin:t,numCells:s,calculatedImageSettings:n}},[c,i,r,a,l]);return{qrcode:c,margin:u,cells:d,numCells:m,calculatedImageSettings:h}}var w=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();o.default.forwardRef(function(e,t){let{value:s,size:a=128,level:l="L",bgColor:r=y,fgColor:i=N,includeMargin:n=!1,minVersion:c=1,boostLevel:d,marginSize:u,imageSettings:m}=e,h=p(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:g}=h,f=p(h,["style"]),C=null==m?void 0:m.src,k=o.default.useRef(null),M=o.default.useRef(null),E=o.default.useCallback(e=>{k.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]),[S,R]=o.default.useState(!1),{margin:P,cells:I,numCells:A,calculatedImageSettings:T}=b({value:s,level:l,minVersion:c,boostLevel:d,includeMargin:n,marginSize:u,imageSettings:m,size:a});o.default.useEffect(()=>{if(null!=k.current){let e=k.current,t=e.getContext("2d");if(!t)return;let s=I,l=M.current,n=null!=T&&null!==l&&l.complete&&0!==l.naturalHeight&&0!==l.naturalWidth;n&&null!=T.excavation&&(s=v(I,T.excavation));let o=window.devicePixelRatio||1;e.height=e.width=a*o;let c=a/A*o;t.scale(c,c),t.fillStyle=r,t.fillRect(0,0,A,A),t.fillStyle=i,w?t.fill(new Path2D(j(s,P))):I.forEach(function(e,s){e.forEach(function(e,a){e&&t.fillRect(a+P,s+P,1,1)})}),T&&(t.globalAlpha=T.opacity),n&&t.drawImage(l,T.x+P,T.y+P,T.w,T.h)}}),o.default.useEffect(()=>{R(!1)},[C]);let z=x({height:a,width:a},g),O=null;return null!=C&&(O=o.default.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{R(!0)},ref:M,crossOrigin:null==T?void 0:T.crossOrigin})),o.default.createElement(o.default.Fragment,null,o.default.createElement("canvas",x({style:z,height:a,width:a,ref:E,role:"img"},f)),O)}).displayName="QRCodeCanvas";var C=o.default.forwardRef(function(e,t){let{value:s,size:a=128,level:l="L",bgColor:r=y,fgColor:i=N,includeMargin:n=!1,minVersion:c=1,boostLevel:d,title:u,marginSize:m,imageSettings:h}=e,g=p(e,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:w,numCells:C,calculatedImageSettings:k}=b({value:s,level:l,minVersion:c,boostLevel:d,includeMargin:n,marginSize:m,imageSettings:h,size:a}),M=w,E=null;null!=h&&null!=k&&(null!=k.excavation&&(M=v(w,k.excavation)),E=o.default.createElement("image",{href:h.src,height:k.h,width:k.w,x:k.x+f,y:k.y+f,preserveAspectRatio:"none",opacity:k.opacity,crossOrigin:k.crossOrigin}));let S=j(M,f);return o.default.createElement("svg",x({height:a,width:a,viewBox:`0 0 ${C} ${C}`,ref:t,role:"img"},g),!!u&&o.default.createElement("title",null,u),o.default.createElement("path",{fill:r,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),o.default.createElement("path",{fill:i,d:S,shapeRendering:"crispEdges"}),E)});C.displayName="QRCodeSVG",e.s(["QRCodeSVG",()=>C])},58524,e=>{"use strict";let t=(0,e.i(75254).default)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["Link2",()=>t],58524)},31782,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(43531);let l=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var r=e.i(7233),i=e.i(20312);function n({optionName:e,price:s,popupContent:n,selected:o,onSelect:c,onDetail:d}){let{image:u}=n?(0,i.parsePopupContent)(n):{image:null};return(0,t.jsxs)("div",{className:`flex-shrink-0 w-[140px] rounded-xl border-2 overflow-hidden transition-all ${o?"border-blue-500 bg-blue-50 shadow-md shadow-blue-100":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm"}`,children:[(0,t.jsxs)("div",{className:"relative h-24 bg-gray-100 flex items-center justify-center overflow-hidden cursor-pointer",onClick:d||c,children:[u?(0,t.jsx)("img",{src:u,alt:e,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"text-gray-300 text-xs",children:"No Image"}),o&&(0,t.jsx)("div",{className:"absolute top-1.5 right-1.5 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(a.Check,{className:"w-3 h-3 text-white"})}),n&&d&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"absolute top-1.5 left-1.5 w-6 h-6 bg-white/80 backdrop-blur rounded-full flex items-center justify-center hover:bg-white",children:(0,t.jsx)(l,{className:"w-3.5 h-3.5 text-gray-500"})})]}),(0,t.jsxs)("div",{className:"p-2.5",children:[(0,t.jsx)("p",{className:`text-xs font-medium line-clamp-2 leading-tight ${o?"text-blue-700":"text-gray-800"}`,children:e}),void 0!==s&&(0,t.jsx)("p",{className:`text-xs mt-1 font-semibold ${o?"text-blue-600":"text-gray-600"}`,children:(0,i.formatPrice)(s)}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),c?.()},className:`w-full mt-2 py-1.5 rounded-lg text-xs font-semibold transition-colors ${o?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-blue-50 hover:text-blue-600"}`,children:o?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(a.Check,{className:"w-3 h-3"})," 선택됨"]}):(0,t.jsxs)("span",{className:"flex items-center justify-center gap-1",children:[(0,t.jsx)(r.Plus,{className:"w-3 h-3"})," 추가하기"]})})]})]})}var o=e.i(37727),c=e.i(59544);function d({isOpen:e,onClose:s,optionName:l,popupContent:n,price:d,selected:u,onSelect:m}){if(!e)return null;let{text:h,image:x}=(0,i.parsePopupContent)(n);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",onClick:s,children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-lg rounded-t-2xl max-h-[85vh] overflow-y-auto animate-slide-up",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"flex justify-center pt-3 pb-1",children:(0,t.jsx)("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),x&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:x,alt:l,className:"w-full max-h-64 object-cover"}),(0,t.jsx)("button",{onClick:s,className:"absolute top-3 right-3 w-8 h-8 bg-black/40 backdrop-blur rounded-full flex items-center justify-center",children:(0,t.jsx)(o.X,{className:"w-5 h-5 text-white"})})]}),(0,t.jsxs)("div",{className:"p-5 space-y-4",children:[!x&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:l}),(0,t.jsx)("button",{onClick:s,className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(o.X,{className:"w-5 h-5 text-gray-400"})})]}),x&&(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:l}),void 0!==d&&(0,t.jsx)("p",{className:"text-xl font-bold text-blue-600",children:(0,i.formatPrice)(d)}),h&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-1.5",children:"시공범위"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap leading-relaxed",children:h})]}),m&&(0,t.jsx)(c.default,{fullWidth:!0,size:"lg",variant:u?"outline":"primary",onClick:()=>{m(),s()},children:u?(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(a.Check,{className:"w-5 h-5"})," 선택 해제"]}):(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(r.Plus,{className:"w-5 h-5"})," 추가하기"]})})]})]})})}function u({partners:e,selectedRows:a,onToggleRow:r,selectedTypeId:i}){let[o,c]=(0,s.useState)(null),u=(e,t)=>a.some(s=>s.sheetId===e&&s.rowId===t),m=[];return e.forEach(e=>{e.categories.forEach(t=>{m.push({id:t.sheetId,name:t.categoryName,partnerName:e.partnerName,partnerId:e.partnerId,options:t.options,columns:t.columns})})}),(0,t.jsxs)("div",{className:"space-y-6",children:[m.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("h4",{className:"text-base font-bold text-gray-800",children:e.name}),(0,t.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(l,{className:"w-4 h-4"})})]}),e.options.length>0?(0,t.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:e.options.map(s=>{let a=((e,t)=>{if(!i)return;let s=t.find(e=>e.apartmentTypeId===i);if(s){let t=e.cellValues?.[s.id];if(void 0!==t&&""!==t&&"0"!==t){let e=Number(String(t).replace(/,/g,""));if(e>0)return e}let a=e.prices?.[s.id];if(a&&a>0)return a}for(let s of t)if("amount"===s.columnType||!s.columnType){let t=e.prices?.[s.id];if(t&&t>0)return t;let a=e.cellValues?.[s.id];if(a){let e=Number(String(a).replace(/,/g,""));if(e>0)return e}}})(s,e.columns),l=u(e.id,s.rowId);return(0,t.jsx)(n,{optionName:s.optionName,price:a,popupContent:s.popupContent,selected:l,onSelect:()=>r(e.id,s.rowId,s.optionName,e.name,e.partnerName),onDetail:s.popupContent?()=>c({optionName:s.optionName,popupContent:s.popupContent,price:a,sheetId:e.id,rowId:s.rowId,categoryName:e.name,partnerName:e.partnerName}):void 0},s.rowId)})}):(0,t.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"등록된 옵션이 없습니다."})]},e.id)),0===m.length&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-400 text-sm",children:"등록된 품목이 없습니다."}),o&&(0,t.jsx)(d,{isOpen:!0,onClose:()=>c(null),optionName:o.optionName,popupContent:o.popupContent,price:o.price,selected:u(o.sheetId,o.rowId),onSelect:()=>{r(o.sheetId,o.rowId,o.optionName,o.categoryName,o.partnerName)}})]})}e.s(["default",()=>u],31782)},86536,e=>{"use strict";let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},88699,e=>{"use strict";let t=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>t],88699)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},20312,e=>{"use strict";function t(e){let t="\n---IMAGE---\n",s=e.indexOf(t);return -1===s?{text:e,image:null}:{text:e.slice(0,s),image:e.slice(s+t.length)}}function s(e){if(null==e||""===e)return"-";let t="number"==typeof e?e:Number(String(e).replace(/,/g,""));return!t||isNaN(t)?"-":`${t.toLocaleString("ko-KR")}원`}e.s(["formatPrice",()=>s,"parsePopupContent",()=>t])},54508,31278,e=>{"use strict";var t=e.i(43476),s=e.i(88699),a=e.i(27612),l=e.i(20312);function r({optionName:e,popupContent:r,apartmentTypeId:i,price:n,prices:o,cellValues:c,columns:d,apartmentTypes:u,onEdit:m,onDelete:h}){let{image:x}=r?(0,l.parsePopupContent)(r):{image:null},p=i?i.split(",").filter(Boolean):[],g=d.filter(e=>"amount"===e.columnType&&e.apartmentTypeId&&(o[e.id]||o[e.apartmentTypeId])).map(e=>u.find(t=>t.id===e.apartmentTypeId)?.name).filter(Boolean),f=p.length>0?p.map(e=>u.find(t=>t.id===e)?.name).filter(Boolean):g;return(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-sm transition-shadow",children:(0,t.jsxs)("div",{className:"flex",children:[x&&(0,t.jsx)("div",{className:"w-20 h-20 flex-shrink-0 bg-gray-100",children:(0,t.jsx)("img",{src:x,alt:e,className:"w-full h-full object-cover"})}),(0,t.jsx)("div",{className:"flex-1 p-3 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-800 truncate",children:e}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[f.map((e,s)=>(0,t.jsx)("span",{className:"text-xs bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-medium",children:e},s)),null!=n&&n>0&&(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-700",children:(0,l.formatPrice)(n)})]}),d.length>0&&(0,t.jsx)("div",{className:"mt-1.5 flex flex-wrap gap-x-3 gap-y-0.5",children:d.map(e=>{if("amount"===e.columnType){let s=o[e.id]??o[e.apartmentTypeId||""];return s&&0!==Number(s)?(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"text-gray-400",children:[e.customName,":"]})," ",(0,t.jsx)("span",{className:"font-medium text-gray-700",children:(0,l.formatPrice)(s)})]},e.id):null}{let s=c?.[e.id];return s?(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,t.jsxs)("span",{className:"text-gray-400",children:[e.customName,":"]})," ",s]},e.id):null}})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:m,className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:(0,t.jsx)(s.Pencil,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:h,className:"p-1.5 rounded-lg hover:bg-red-50 text-gray-400 hover:text-red-500",children:(0,t.jsx)(a.Trash2,{className:"w-3.5 h-3.5"})})]})]})})]})})}e.s(["default",()=>r],54508);let i=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>i],31278)},52481,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(9165),l=e.i(39964),r=e.i(59544),i=e.i(96640),n=e.i(32098),o=e.i(22706),c=e.i(88840),d=e.i(7233),u=e.i(27612),m=e.i(63209);function h({stages:e,onChange:s,disabled:a}){let l=e.reduce((e,t)=>e+t.ratio,0),i=.01>Math.abs(l-100);return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"결제 단계"}),!a&&(0,t.jsxs)(r.default,{variant:"ghost",size:"sm",onClick:()=>{let t=100-l;s([...e,{name:"",ratio:t>0?t:0}])},children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4 mr-1"}),"단계 추가"]})]}),0===e.length?(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"일시불 (단계 미설정)"}):(0,t.jsx)("div",{className:"space-y-2",children:e.map((l,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:l.name,onChange:t=>{var a;let l;return a=t.target.value,void((l=[...e])[r]={...l[r],name:a},s(l))},placeholder:`${r+1}차`,disabled:a,className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("input",{type:"number",value:l.ratio,onChange:t=>{var a;let l;return a=t.target.value,void((l=[...e])[r]={...l[r],ratio:Number(a)||0},s(l))},min:0,max:100,disabled:a,className:"w-20 px-3 py-2 border border-gray-200 rounded-lg text-sm text-right focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-50"}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"%"})]}),!a&&(0,t.jsx)("button",{onClick:()=>{s(e.filter((e,t)=>t!==r))},className:"p-1.5 rounded-lg hover:bg-error-light text-gray-400 hover:text-error transition-colors",children:(0,t.jsx)(u.Trash2,{className:"w-4 h-4"})})]},r))}),e.length>0&&(0,t.jsxs)("div",{className:`flex items-center gap-2 text-sm ${i?"text-success":"text-error"}`,children:[!i&&(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["합계: ",l,"% ",!i&&"(100%가 되어야 합니다)"]})]})]})}var x=e.i(31782),p=e.i(54508),g=e.i(56909),f=e.i(64659),y=e.i(55900),N=e.i(74886),j=e.i(43531),v=e.i(58524),b=e.i(7486),w=e.i(94918),C=e.i(86536),k=e.i(75254);let M=(0,k.default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var E=e.i(88699);let S=(0,k.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var R=e.i(31278),P=e.i(23962),I=e.i(28835);function A({eventId:e,backHref:m}){let k,A,{toast:T}=(0,c.useToast)(),[z,O]=(0,s.useState)(null),[$,L]=(0,s.useState)(null),[_,F]=(0,s.useState)(!0),[V,B]=(0,s.useState)(!1),[D,H]=(0,s.useState)([]),[U,Q]=(0,s.useState)(""),[K,Y]=(0,s.useState)(""),[G,X]=(0,s.useState)([]),[W,q]=(0,s.useState)(""),[J,Z]=(0,s.useState)(null),[ee,et]=(0,s.useState)([]),[es,ea]=(0,s.useState)([]),[el,er]=(0,s.useState)(null),[ei,en]=(0,s.useState)(null),[eo,ec]=(0,s.useState)(!1),[ed,eu]=(0,s.useState)(""),[em,eh]=(0,s.useState)(!1),[ex,ep]=(0,s.useState)(!1),[eg,ef]=(0,s.useState)(!1),[ey,eN]=(0,s.useState)(!1),[ej,ev]=(0,s.useState)(!1),[eb,ew]=(0,s.useState)(null),[eC,ek]=(0,s.useState)({optionName:"",prices:{},cellValues:{}}),[eM,eE]=(0,s.useState)(!1),[eS,eR]=(0,s.useState)({types:!0,stages:!0,terms:!1,sheets:!0}),eP=e=>{eR(t=>({...t,[e]:!t[e]}))},eI=(0,s.useCallback)(async()=>{try{let[t,s]=await Promise.all([a.default.get(`/ic/configs/event/${e}`).catch(()=>null),a.default.get(`/events/${e}`).catch(()=>null)]),l=s?.data?.data;L(l);let r=await a.default.get(`/events/${e}/participants`).catch(()=>null);et(r?.data?.data||[]);let i=t?.data?.data;if(i){O(i),H(i.paymentStages||[]),Q(i.legalTerms||""),Y(i.specialNotes||""),X(i.apartmentTypes||[]);let e=await a.default.get(`/ic/configs/${i.id}/sheets`).catch(()=>null);ea(e?.data?.data||[])}}catch{T("데이터를 불러올 수 없습니다.","error")}finally{F(!1)}},[e,T]);(0,s.useEffect)(()=>{eI()},[eI]);let eA=async()=>{try{let t=`1. 계약일 기준 14일 이후에는 취소가 불가능합니다.
2. 본 계약은 해당 옵션 공사에 대한 계약이며, 별도 계약 품목은 보장하지 않습니다.
3. 공사 일정은 입주 일정에 따라 변경될 수 있습니다.
4. 계약 후 옵션 변경은 공사 착수 전까지만 가능합니다.`,s=(await a.default.post("/ic/configs",{eventId:e,paymentStages:[{name:"계약금",ratio:20},{name:"중도금",ratio:40},{name:"잔금",ratio:40}],legalTerms:t})).data.data;O(s),H(s.paymentStages||[]),Q(s.legalTerms||""),Y(s.specialNotes||""),X(s.apartmentTypes||[]),T("통합 계약 설정이 생성되었습니다.","success")}catch{T("설정 생성에 실패했습니다.","error")}},eT=async()=>{if(z){B(!0);try{let e=await a.default.patch(`/ic/configs/${z.id}`,{paymentStages:D,legalTerms:U,specialNotes:K});O(e.data.data),T("설정이 저장되었습니다.","success")}catch{T("저장에 실패했습니다.","error")}finally{B(!1)}}},ez=async e=>{if(z)try{let t=await a.default.patch(`/ic/configs/${z.id}`,{status:e});O(t.data.data),T(`상태가 "${e}"로 변경되었습니다.`,"success")}catch{T("상태 변경에 실패했습니다.","error")}},eO=async()=>{if(z){ef(!0);try{await a.default.delete(`/ic/configs/${z.id}`),O(null),ep(!1),T("통합 계약 설정이 삭제되었습니다.","success")}catch{T("설정 삭제에 실패했습니다.","error")}finally{ef(!1)}}},e$=async()=>{if(z&&W.trim())try{let e=await a.default.post(`/ic/configs/${z.id}/apartment-types`,{name:W.trim(),sortOrder:G.length});X(t=>[...t,e.data.data]),q(""),T("타입이 추가되었습니다.","success")}catch{T("타입 추가에 실패했습니다.","error")}},eL=async()=>{if(z&&J)try{await a.default.patch(`/ic/configs/${z.id}/apartment-types/${J.id}`,{name:J.name}),X(e=>e.map(e=>e.id===J.id?{...e,name:J.name}:e)),Z(null),T("타입이 수정되었습니다.","success")}catch{T("타입 수정에 실패했습니다.","error")}},e_=async e=>{if(z)try{await a.default.delete(`/ic/configs/${z.id}/apartment-types/${e}`),X(t=>t.filter(t=>t.id!==e)),T("타입이 삭제되었습니다.","success")}catch{T("타입 삭제에 실패했습니다.","error")}},eF=async()=>{if(z&&ed.trim()){eh(!0);try{let e=await a.default.post("/ic/sheets",{configId:z.id,categoryName:ed.trim()});ea(t=>[...t,e.data.data]),eu(""),ec(!1),T("시트가 생성되었습니다.","success")}catch{T("시트 생성에 실패했습니다.","error")}finally{eh(!1)}}},eV=async(e,t)=>{if(z)try{await a.default.patch(`/ic/configs/${z.id}/sheets/${e}`,{status:t}),ea(s=>s.map(s=>s.id===e?{...s,status:t}:s)),T("시트 상태가 변경되었습니다.","success")}catch{T("상태 변경에 실패했습니다.","error")}},eB=async()=>{if(ei&&z)try{await a.default.patch(`/ic/configs/${z.id}/sheets/${ei.id}`,{status:"inactive"}),ea(e=>e.filter(e=>e.id!==ei.id)),en(null),el===ei.id&&er(null),T("시트가 삭제되었습니다.","success")}catch{T("시트 삭제에 실패했습니다.","error")}},[eD,eH]=(0,s.useState)(!1),eU=async()=>{if(z&&0!==es.length){eH(!0);try{await Promise.all(es.map(e=>a.default.patch(`/ic/configs/${z.id}/sheets/${e.id}/commission`,{commissionRate:e.commissionRate||0}))),T("모든 수수료율이 저장되었습니다.","success")}catch{T("수수료율 저장에 실패했습니다.","error")}finally{eH(!1)}}},eQ=async()=>{if(eb&&z){eE(!0);try{let{sheet:e,row:t}=eb,s=(e.rows||[]).map(e=>e.id===t.id?{...e,optionName:eC.optionName,prices:eC.prices,cellValues:eC.cellValues}:e),l=await a.default.put(`/ic/configs/${z.id}/sheets/${e.id}/rows`,{rows:s.map((e,t)=>({optionName:e.optionName,prices:e.prices||{},cellValues:e.cellValues||{},sortOrder:e.sortOrder??t,popupContent:e.popupContent||void 0}))}),r=l.data?.data||s;ea(t=>t.map(t=>t.id===e.id?{...t,rows:r}:t)),ew(null),T("품목이 수정되었습니다.","success")}catch{T("수정에 실패했습니다.","error")}finally{eE(!1)}}},eK=async(e,t)=>{if(!z||!window.confirm(`"${t.optionName}" 품목을 삭제하시겠습니까?`))return;let s=(e.rows||[]).filter(e=>e.id!==t.id);try{let t=await a.default.put(`/ic/configs/${z.id}/sheets/${e.id}/rows`,{rows:s.map((e,t)=>({optionName:e.optionName,prices:e.prices||{},cellValues:e.cellValues||{},sortOrder:e.sortOrder??t,popupContent:e.popupContent||void 0}))}),l=t.data?.data||s;ea(t=>t.map(t=>t.id===e.id?{...t,rows:l}:t)),T("품목이 삭제되었습니다.","success")}catch{T("삭제에 실패했습니다.","error")}},eY=$?.inviteCode?`${window.location.origin}/events/${$.inviteCode}/options`:"";return _?(0,t.jsxs)("div",{children:[(0,t.jsx)(o.default,{title:"통합 계약 설정",backHref:m}),(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"animate-pulse h-24 bg-white rounded-xl"},e))})]}):z?(0,t.jsxs)("div",{className:"overflow-x-hidden",children:[V&&(0,t.jsx)("div",{className:"fixed inset-0 z-[200] bg-black/40 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl px-8 py-6 shadow-2xl flex items-center gap-4",children:[(0,t.jsx)(R.Loader2,{className:"w-6 h-6 text-blue-600 animate-spin"}),(0,t.jsx)("span",{className:"text-base font-medium text-gray-800",children:"저장 중..."})]})}),(0,t.jsx)(o.default,{title:"통합 계약 설정",backHref:m,actions:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 flex-wrap",children:[(0,t.jsx)(i.default,{status:z.status}),({draft:[{label:"활성화",next:"active",variant:"primary"}],active:[{label:"마감",next:"closed",variant:"danger"}],closed:[{label:"다시 활성화",next:"active",variant:"outline"}]})[z.status]?.map(e=>(0,t.jsx)(r.default,{size:"sm",variant:e.variant,onClick:()=>ez(e.next),children:e.label},e.next)),(0,t.jsx)(r.default,{size:"sm",variant:"danger",onClick:()=>ep(!0),children:(0,t.jsx)(u.Trash2,{className:"w-3.5 h-3.5"})})]})}),$?.inviteCode&&(0,t.jsxs)(l.default,{className:"mb-4",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-500 mb-1 flex items-center gap-1",children:[(0,t.jsx)(P.QrCode,{className:"w-3.5 h-3.5"})," 고객 방문 QR코드"]}),(0,t.jsx)("p",{className:"text-[11px] text-gray-400 mb-2",children:"고객이 스캔하면 방문 등록 → 홈 화면에서 옵션 선택으로 이어집니다"}),(0,t.jsx)("div",{className:"flex justify-center bg-gray-50 rounded-lg p-3",children:(0,t.jsx)(I.QRCodeSVG,{value:`${window.location.origin}/events/${$.inviteCode}/visit`,size:160,level:"H",includeMargin:!0,fgColor:"#1B3460"})})]}),(0,t.jsxs)("div",{className:"pt-3 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(v.Link2,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"고객 옵션 선택 링크"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 font-mono bg-gray-50 px-2 py-1.5 rounded-lg truncate mb-2 break-all",children:eY}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)(r.default,{size:"sm",variant:"outline",onClick:()=>{eY&&(navigator.clipboard.writeText(eY),ev(!0),T("링크가 복사되었습니다.","success"),setTimeout(()=>ev(!1),2e3))},children:ej?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Check,{className:"w-3.5 h-3.5 mr-1"})," 복사됨"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Copy,{className:"w-3.5 h-3.5 mr-1"})," 복사"]})}),(0,t.jsx)("a",{href:eY,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)(r.default,{size:"sm",variant:"outline",children:[(0,t.jsx)(S,{className:"w-3.5 h-3.5 mr-1"})," 열기"]})}),(0,t.jsxs)(r.default,{size:"sm",variant:"outline",onClick:()=>eN(!0),children:[(0,t.jsx)(C.Eye,{className:"w-3.5 h-3.5 mr-1"}),"미리보기"]})]})]})]}),(0,t.jsxs)(l.default,{className:"mb-4",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between",onClick:()=>eP("types"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Building2,{className:"w-5 h-5 text-indigo-500"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"타입"}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:[G.length,"개"]})]}),eS.types?(0,t.jsx)(y.ChevronUp,{className:"w-4 h-4 text-gray-400"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),eS.types&&(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[0===G.length?(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"등록된 타입이 없습니다."}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:G.map((e,s)=>(0,t.jsx)("div",{className:"border border-gray-200 rounded-lg p-3 flex items-center justify-between",children:J?.id===e.id?(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)("input",{type:"text",value:J.name,onChange:e=>Z({...J,name:e.target.value}),className:"flex-1 px-2 py-1 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:e=>"Enter"===e.key&&eL()}),(0,t.jsx)(r.default,{size:"sm",onClick:eL,children:"저장"}),(0,t.jsx)(r.default,{size:"sm",variant:"outline",onClick:()=>Z(null),children:"취소"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold",children:s+1}),(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),e.floorPlanFileId&&(0,t.jsx)("span",{className:"text-[10px] bg-success-light text-success px-1.5 py-0.5 rounded-full",children:"평면도"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>Z({id:e.id,name:e.name}),className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-400 hover:text-gray-600",children:(0,t.jsx)(E.Pencil,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:()=>e_(e.id),className:"p-1.5 rounded-lg hover:bg-error-light text-gray-400 hover:text-error",children:(0,t.jsx)(u.Trash2,{className:"w-3.5 h-3.5"})})]})]})},e.id))}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:W,onChange:e=>q(e.target.value),placeholder:"예: 59A, 84B, 펜트하우스",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:e=>"Enter"===e.key&&e$()}),(0,t.jsxs)(r.default,{size:"sm",onClick:e$,disabled:!W.trim(),children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4 mr-1"}),"추가"]})]})]})]}),(0,t.jsxs)(l.default,{className:"mb-4",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between",onClick:()=>eP("stages"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.FileSpreadsheet,{className:"w-5 h-5 text-success"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"결제 단계"}),(0,t.jsx)("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:0===D.length?"일시불":`${D.length}단계`})]}),eS.stages?(0,t.jsx)(y.ChevronUp,{className:"w-4 h-4 text-gray-400"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),eS.stages&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(h,{stages:D,onChange:H})})]}),(0,t.jsxs)(l.default,{className:"mb-4",children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between",onClick:()=>eP("terms"),children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"약관 · 특약사항"}),eS.terms?(0,t.jsx)(y.ChevronUp,{className:"w-4 h-4 text-gray-400"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),eS.terms&&(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1.5",children:"약관"}),(0,t.jsx)("textarea",{value:U,onChange:e=>Q(e.target.value),rows:5,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y",placeholder:"고객이 계약 시 동의할 약관 내용을 입력하세요."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-1.5",children:"특약사항"}),(0,t.jsx)("textarea",{value:K,onChange:e=>Y(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y",placeholder:"추가 특약사항이 있으면 입력하세요."})]})]})]}),(0,t.jsxs)(r.default,{fullWidth:!0,size:"lg",onClick:eT,loading:V,className:"mb-6",children:[(0,t.jsx)(g.Save,{className:"w-5 h-5 mr-2"}),"설정 저장"]}),es.length>0&&(0,t.jsxs)(l.default,{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(w.FileSpreadsheet,{className:"w-5 h-5 text-amber-500"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"품목 설정하기"})]}),0===es.flatMap(e=>e.rows||[]).length?(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"등록된 품목이 없습니다."}):(0,t.jsx)("div",{className:"space-y-4",children:es.filter(e=>(e.rows||[]).length>0).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg px-3 py-2 mb-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Building2,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm font-bold text-gray-800",children:e.partner?.name||"업체"}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["(",e.categoryName,")"]})]}),(0,t.jsx)("button",{onClick:()=>er(el===e.id?null:e.id),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"상세보기"})]}),(0,t.jsx)("div",{className:"border-b border-gray-200 pb-1.5 mb-1 px-1",children:(0,t.jsxs)("div",{className:"grid grid-cols-[1fr_60px_90px] gap-2 text-[11px] font-semibold text-gray-500",children:[(0,t.jsx)("span",{children:"품목"}),(0,t.jsx)("span",{className:"text-center",children:"계약건"}),(0,t.jsx)("span",{className:"text-right",children:"계약금액"})]})}),(e.rows||[]).map(s=>(0,t.jsxs)("div",{className:"grid grid-cols-[1fr_60px_90px] gap-2 items-center py-2 border-b border-gray-50 px-1 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-800 truncate",children:s.optionName}),(0,t.jsx)("span",{className:"text-gray-500 text-xs text-center",children:"0건"}),(0,t.jsx)("span",{className:"text-gray-700 text-xs text-right font-medium",children:(()=>{let e=Object.values(s.prices||{}).filter(e=>Number(e)>0).map(Number);if(e.length>0){let t=Math.min(...e),s=Math.max(...e);return t===s?`${t.toLocaleString("ko-KR")}원`:`${t.toLocaleString("ko-KR")}~${s.toLocaleString("ko-KR")}원`}return s.price?`${Number(s.price).toLocaleString("ko-KR")}원`:"—"})()})]},`${e.id}-${s.id}`))]},e.id))})]}),(0,t.jsxs)(l.default,{children:[(0,t.jsxs)("button",{className:"w-full flex items-center justify-between",onClick:()=>eP("sheets"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.FileSpreadsheet,{className:"w-5 h-5 text-amber-500"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:"협력업체 시트"}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-0.5 rounded-full",children:[es.length,"개"]})]}),eS.sheets?(0,t.jsx)(y.ChevronUp,{className:"w-4 h-4 text-gray-400"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),eS.sheets&&(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(k=new Set(es.map(e=>e.partner?.id).filter(Boolean)),0===(A=ee.filter(e=>"approved"===e.status&&e.organization?.type==="partner").filter(e=>!k.has(e.organizationId))).length?null:(0,t.jsxs)("div",{className:"bg-warning-light border border-amber-200 rounded-xl p-3",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-warning mb-1",children:["시트 미제출 업체 (",A.length,")"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:A.map(e=>(0,t.jsx)("span",{className:"text-xs bg-yellow-100 text-warning px-2 py-0.5 rounded-full",children:e.organization?.name||"업체"},e.id))})]})),eo?(0,t.jsxs)("div",{className:"border-2 border-dashed border-blue-300 rounded-xl p-4 bg-blue-50/30",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"새 시트 만들기"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:ed,onChange:e=>eu(e.target.value),placeholder:"카테고리명 (예: 마감재, 가전, 가구)",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:e=>"Enter"===e.key&&eF(),autoFocus:!0}),(0,t.jsxs)(r.default,{size:"sm",onClick:eF,disabled:!ed.trim(),loading:em,children:[(0,t.jsx)(j.Check,{className:"w-4 h-4 mr-1"}),"생성"]}),(0,t.jsx)(r.default,{size:"sm",variant:"outline",onClick:()=>{ec(!1),eu("")},children:"취소"})]})]}):(0,t.jsxs)("button",{onClick:()=>ec(!0),className:"w-full border-2 border-dashed border-gray-200 rounded-xl p-4 text-sm text-gray-500 hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50/30 transition-colors flex items-center justify-center gap-2",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4"}),"새 시트 추가"]}),0!==es.length||eo?es.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between bg-gray-50/50",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.categoryName}),(0,t.jsx)(i.default,{status:e.status})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.partner?.name||"업체"," · 열 ",e.columns?.length||0,"개 · 행 ",e.rows?.length||0,"개"]})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["draft"===e.status&&(0,t.jsxs)(r.default,{size:"sm",variant:"outline",onClick:()=>eV(e.id,"active"),children:[(0,t.jsx)(C.Eye,{className:"w-3.5 h-3.5 mr-1"})," 활성화"]}),"active"===e.status&&(0,t.jsxs)(r.default,{size:"sm",variant:"outline",onClick:()=>eV(e.id,"inactive"),children:[(0,t.jsx)(M,{className:"w-3.5 h-3.5 mr-1"})," 비활성"]}),"inactive"===e.status&&(0,t.jsxs)(r.default,{size:"sm",variant:"outline",onClick:()=>eV(e.id,"active"),children:[(0,t.jsx)(C.Eye,{className:"w-3.5 h-3.5 mr-1"})," 재활성"]}),(0,t.jsx)("button",{onClick:()=>en(e),className:"p-2 rounded-lg hover:bg-error-light text-gray-400 hover:text-error",title:"시트 삭제",children:(0,t.jsx)(u.Trash2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>er(el===e.id?null:e.id),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500",children:el===e.id?(0,t.jsx)(y.ChevronUp,{className:"w-4 h-4"}):(0,t.jsx)(f.ChevronDown,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"px-4 py-2 border-t border-gray-200 bg-white flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:"수수료율"}),(0,t.jsx)("input",{type:"text",inputMode:"numeric",value:e.commissionRate?String(e.commissionRate):"",onChange:t=>{let s=t.target.value.replace(/[^0-9.]/g,""),a=parseFloat(s=s.replace(/^0+(\d)/,"$1"));ea(t=>t.map(t=>t.id===e.id?{...t,commissionRate:isNaN(a)?0:Math.min(a,100)}:t))},placeholder:"0",className:"w-20 px-2 py-1 border border-gray-200 rounded-lg text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"%"})]}),el===e.id&&(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[0===(e.rows||[]).length?(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"등록된 품목이 없습니다."}):(e.rows||[]).map(s=>(0,t.jsx)(p.default,{optionName:s.optionName,popupContent:s.popupContent,prices:s.prices||{},cellValues:s.cellValues,columns:(e.columns||[]).map(e=>({id:e.id,customName:e.customName||e.apartmentType?.name,columnType:e.columnType||"amount",apartmentTypeId:e.apartmentTypeId})),apartmentTypes:G,onEdit:()=>{ew({sheet:e,row:s}),ek({optionName:s.optionName||"",prices:{...s.prices||{}},cellValues:{...s.cellValues||{}}})},onDelete:()=>eK(e,s)},s.id)),(0,t.jsxs)("p",{className:"text-xs text-gray-400 text-center pt-2",children:[(e.columns||[]).length,"열 · ",(e.rows||[]).length,"행"]})]})]},e.id)):(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-4",children:"등록된 시트가 없습니다."}),es.length>0&&(0,t.jsxs)(r.default,{fullWidth:!0,size:"lg",variant:"outline",onClick:eU,loading:eD,className:"mt-2",children:[(0,t.jsx)(g.Save,{className:"w-4 h-4 mr-2"}),"수수료율 일괄 저장"]})]})]}),(0,t.jsxs)(n.default,{isOpen:!!ei,onClose:()=>en(null),title:"시트 삭제 확인",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:[(0,t.jsxs)("strong",{children:["“",ei?.categoryName,"”"]})," 시트를 삭제하시겠습니까? 시트의 모든 데이터가 비활성화됩니다."]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(r.default,{variant:"outline",onClick:()=>en(null),children:"취소"}),(0,t.jsxs)(r.default,{variant:"danger",onClick:eB,children:[(0,t.jsx)(u.Trash2,{className:"w-4 h-4 mr-1"}),"삭제"]})]})]}),(0,t.jsx)(n.default,{isOpen:ey,onClose:()=>eN(!1),title:"고객 미리보기",size:"lg",children:(0,t.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:0===es.length?(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-8",children:"등록된 시트가 없습니다."}):(0,t.jsx)(x.default,{partners:es.filter(e=>"inactive"!==e.status).reduce((e,t)=>{let s=t.partner?.id||"unknown",a=e.find(e=>e.partnerId===s);return a||(a={partnerId:s,partnerName:t.partner?.name||"업체",categories:[]},e.push(a)),a.categories.push({sheetId:t.id,categoryName:t.categoryName,columns:(t.columns||[]).map(e=>({id:e.id,customName:e.customName||e.apartmentType?.name||"열",columnType:e.columnType||"amount",apartmentTypeId:e.apartmentTypeId})),options:(t.rows||[]).map(e=>({rowId:e.id,optionName:e.optionName,popupContent:e.popupContent,cellValues:e.cellValues||{},prices:e.prices||{}}))}),e},[]),selectedRows:[],onToggleRow:()=>{}})})}),(0,t.jsx)(n.default,{isOpen:!!eb,onClose:()=>ew(null),title:"품목 수정",children:eb&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"품목명"}),(0,t.jsx)("input",{type:"text",value:eC.optionName,onChange:e=>ek(t=>({...t,optionName:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(eb.sheet.columns||[]).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"타입별 금액"}),(0,t.jsx)("div",{className:"space-y-2",children:(eb.sheet.columns||[]).map(e=>{let s=e.customName||e.apartmentType?.name||"열",a="amount"===(e.columnType||"amount"),l=a&&e.apartmentTypeId||e.id,r=a?eC.prices[l]??"":eC.cellValues[l]??"";return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 w-24 shrink-0 truncate",children:s}),a?(0,t.jsx)("input",{type:"text",inputMode:"numeric",value:r?Number(r).toLocaleString("ko-KR"):"",onChange:e=>{let t=Number(e.target.value.replace(/[^0-9]/g,""));ek(e=>({...e,prices:{...e.prices,[l]:t||0}}))},placeholder:"0",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm text-right focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,t.jsx)("input",{type:"text",value:r,onChange:e=>ek(t=>({...t,cellValues:{...t.cellValues,[l]:e.target.value}})),className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),a&&(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"원"})]},e.id)})})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[(0,t.jsx)(r.default,{variant:"outline",onClick:()=>ew(null),children:"취소"}),(0,t.jsxs)(r.default,{onClick:eQ,loading:eM,disabled:!eC.optionName.trim(),children:[(0,t.jsx)(g.Save,{className:"w-4 h-4 mr-1"}),"저장"]})]})]})}),(0,t.jsxs)(n.default,{isOpen:ex,onClose:()=>ep(!1),title:"통합 계약 설정 삭제",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"통합 계약 설정을 삭제하시겠습니까? 모든 아파트 타입, 결제단계, 시트 데이터가 함께 삭제됩니다. 이 작업은 되돌릴 수 없습니다."}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsx)(r.default,{variant:"outline",onClick:()=>ep(!1),children:"취소"}),(0,t.jsxs)(r.default,{variant:"danger",onClick:eO,loading:eg,children:[(0,t.jsx)(u.Trash2,{className:"w-4 h-4 mr-1"}),"삭제"]})]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(o.default,{title:"통합 계약 설정",backHref:m}),(0,t.jsxs)(l.default,{className:"text-center py-12",children:[(0,t.jsx)(w.FileSpreadsheet,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"이 행사에 통합 계약 설정이 없습니다."}),(0,t.jsxs)(r.default,{onClick:eA,children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4 mr-2"}),"통합 계약 설정 생성"]})]})]})}e.s(["default",()=>A],52481)}]);