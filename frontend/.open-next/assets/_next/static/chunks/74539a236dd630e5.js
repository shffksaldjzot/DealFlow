(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let l=(0,s.forwardRef)(({className:e,hoverable:s,padding:l="md",children:a,...i},n)=>(0,t.jsx)("div",{ref:n,className:(0,r.cn)("bg-white rounded-2xl border border-gray-100","shadow-sm",{none:"",sm:"p-4",md:"p-5",lg:"p-6"}[l],s&&"hover:shadow-md hover:border-gray-200 transition-all duration-200 cursor-pointer",e),...i,children:a}));l.displayName="Card",e.s(["default",0,l])},18566,(e,t,s)=>{t.exports=e.r(76562)},59544,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let l=(0,s.forwardRef)(({className:e,variant:s="primary",size:l="md",fullWidth:a,loading:i,disabled:n,children:d,...c},o)=>(0,t.jsxs)("button",{ref:o,className:(0,r.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-400",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400 shadow-md"}[s],{sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[l],a&&"w-full",e),disabled:n||i,...c,children:[i&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d]}));l.displayName="Button",e.s(["default",0,l])},54212,e=>{"use strict";let t=(0,e.i(75254).default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>t],54212)},12189,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),l=e.i(9165),a=e.i(92028),i=e.i(88840),n=e.i(59544),d=e.i(39964),c=e.i(54212),o=e.i(37727);function x(){let{code:e}=(0,r.useParams)(),x=(0,r.useRouter)(),{user:u}=(0,a.useAuthStore)(),{toast:m}=(0,i.useToast)(),[h,f]=(0,s.useState)(null),[g,p]=(0,s.useState)([]),[b,y]=(0,s.useState)({}),[j,N]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!0),[k,C]=(0,s.useState)(null),[T,S]=(0,s.useState)(!1),[$,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let t=await l.default.post(`/contract-flow/${e}/start`),s=(0,l.extractData)(t);f(s),p(s.template?.fields||[]);let r={};s.fieldValues?.forEach(e=>{r[e.fieldId]=e.value}),y(r)}catch(t){m(t.response?.data?.message?.[0]||"계약서를 불러올 수 없습니다.","error"),x.push(`/contract/${e}`)}finally{w(!1)}})()},[e,x,m]);let z=h?.template?.fileId;if((0,s.useEffect)(()=>{if(!z||!e)return;let t=!1;return l.default.get(`/contract-flow/${e}/template-file`,{responseType:"blob"}).then(e=>{if(t)return;let s=new Blob([e.data],{type:e.headers["content-type"]||"application/octet-stream"});C(URL.createObjectURL(s)),S(!1)}).catch(()=>{}),()=>{t=!0}},[z,e]),v)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});let R=h?.template?.fileType==="pdf",B=(e=!1)=>!k||T?null:R?(0,t.jsx)("iframe",{src:k,className:"w-full",style:{minHeight:e?"80vh":"500px",height:"60vh"},title:"계약서"}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:k,alt:"계약서",className:"w-full",onError:()=>S(!0)}),(0,t.jsx)("div",{className:"absolute inset-0",children:g.filter(e=>"signature"!==e.fieldType&&(e.positionX>0||e.positionY>0)).map(s=>{let r=b[s.id];return r?(0,t.jsx)("div",{className:"absolute flex items-center",style:{left:`${s.positionX}%`,top:`${s.positionY}%`,width:`${s.width}%`,height:`${s.height}%`},children:"checkbox"===s.fieldType?(0,t.jsx)("div",{className:`w-5 h-5 border-2 rounded flex items-center justify-center ${"true"===r?"bg-blue-500 border-blue-500":"border-gray-400"}`,children:"true"===r&&(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:"✓"})}):(0,t.jsx)("span",{className:`text-gray-900 font-medium truncate ${e?"text-sm":"text-xs"}`,children:r})},s.id):null})})]}),X=g.filter(e=>"signature"!==e.fieldType&&!e.positionX&&!e.positionY).sort((e,t)=>e.sortOrder-t.sortOrder);g.filter(e=>"signature"!==e.fieldType&&(e.positionX>0||e.positionY>0)&&b[e.id]).sort((e,t)=>e.sortOrder-t.sortOrder);let A=R?g.filter(e=>"signature"!==e.fieldType&&b[e.id]).sort((e,t)=>e.sortOrder-t.sortOrder):X.filter(e=>b[e.id]);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-100 px-4 py-3 sticky top-0 z-30",children:(0,t.jsxs)("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"계약번호"}),(0,t.jsx)("p",{className:"text-sm font-bold font-mono",children:h?.contractNumber})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"행사"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:h?.event?.name})]})]})}),(0,t.jsxs)("div",{className:"max-w-lg mx-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium",children:[(0,t.jsx)("span",{className:"text-blue-600",children:"1. 내용 확인"}),(0,t.jsx)("div",{className:"flex-1 h-0.5 bg-gray-200"}),(0,t.jsx)("span",{className:"text-gray-400",children:"2. 서명"}),(0,t.jsx)("div",{className:"flex-1 h-0.5 bg-gray-200"}),(0,t.jsx)("span",{className:"text-gray-400",children:"3. 완료"})]}),k&&!T&&(0,t.jsxs)(d.default,{padding:"lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"계약서 확인"}),!R&&(0,t.jsxs)("button",{onClick:()=>O(!0),className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700",children:[(0,t.jsx)(c.ZoomIn,{className:"w-3.5 h-3.5"}),"크게 보기"]})]}),(0,t.jsx)("div",{className:"rounded-xl border border-gray-200 overflow-hidden cursor-pointer",onClick:()=>!R&&O(!0),children:B(!1)})]}),A.length>0&&(0,t.jsxs)(d.default,{padding:"lg",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"계약 정보"}),(0,t.jsx)("div",{className:"space-y-3",children:A.map(e=>{let s=b[e.id];return(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:e.label}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"checkbox"===e.fieldType?"true"===s?"✓":"-":s})]},e.id)})})]}),(0,t.jsx)(d.default,{padding:"lg",children:(0,t.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["계약 내용에 동의합니다 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"위 계약 내용을 확인하였으며, 이에 동의합니다."})]})]})}),(0,t.jsx)(n.default,{fullWidth:!0,size:"xl",onClick:()=>{j?x.push(`/contract/${e}/sign`):m("계약 내용에 동의해주세요.","error")},disabled:!j,children:"서명하기"})]}),$&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:()=>O(!1),children:[(0,t.jsx)("button",{onClick:()=>O(!1),className:"absolute top-4 right-4 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-colors z-10",children:(0,t.jsx)(o.X,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("div",{className:"max-w-4xl max-h-[90vh] overflow-auto m-4",onClick:e=>e.stopPropagation(),children:B(!0)})]})]})}e.s(["default",()=>x])}]);