(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(75157);let i=(0,l.forwardRef)(({className:e,variant:l="primary",size:i="md",fullWidth:s,loading:r,disabled:o,children:n,...d},c)=>(0,t.jsxs)("button",{ref:c,className:(0,a.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-md hover:shadow-lg",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-400",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-400 shadow-md"}[l],{sm:"px-3 py-1.5 text-sm rounded-lg",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[i],s&&"w-full",e),disabled:o||r,...d,children:[r&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]}));i.displayName="Button",e.s(["default",0,i])},22706,e=>{"use strict";var t=e.i(43476);let l=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var a=e.i(18566);function i({title:e,subtitle:i,backHref:s,actions:r}){let o=(0,a.useRouter)();return(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[s&&(0,t.jsx)("button",{onClick:()=>o.push(s),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(l,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e}),i&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:i})]})]}),r&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:r})]})}e.s(["default",()=>i],22706)},3812,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(75157);let i=(0,l.forwardRef)(({className:e,label:l,error:i,helperText:s,id:r,...o},n)=>{let d=r||l?.replace(/\s/g,"-").toLowerCase();return(0,t.jsxs)("div",{className:"w-full",children:[l&&(0,t.jsx)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1.5",children:l}),(0,t.jsx)("input",{ref:n,id:d,className:(0,a.cn)("w-full px-4 py-3 rounded-xl border bg-white text-gray-900 text-sm","placeholder:text-gray-400","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",i?"border-red-400 focus:ring-red-400":"border-gray-200 hover:border-gray-300","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed",e),...o}),i&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-red-500",children:i}),s&&!i&&(0,t.jsx)("p",{className:"mt-1.5 text-sm text-gray-400",children:s})]})});i.displayName="Input",e.s(["default",0,i])},54212,e=>{"use strict";let t=(0,e.i(75254).default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>t],54212)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},71649,e=>{"use strict";let t=(0,e.i(75254).default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>t],71649)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},85873,e=>{"use strict";let t=(0,e.i(75254).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["default",()=>t])},74558,e=>{"use strict";var t=e.i(85873);e.s(["PenLine",()=>t.default])},87307,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(59544),i=e.i(3812),s=e.i(27612),r=e.i(71649),o=e.i(75254);let n=(0,o.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var d=e.i(87316),c=e.i(43432),u=e.i(63488),h=e.i(74558);let m=(0,o.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=(0,o.default)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);var x=e.i(54212);let g=(0,o.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var b=e.i(74886);let y=(0,o.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),f=(0,o.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),v=[{value:"text",label:"텍스트",icon:r.Type},{value:"number",label:"숫자",icon:n},{value:"date",label:"날짜",icon:d.Calendar},{value:"checkbox",label:"체크박스",icon:m},{value:"phone",label:"전화번호",icon:c.Phone},{value:"email",label:"이메일",icon:u.Mail},{value:"signature",label:"서명",icon:h.PenLine}],j=[{name:"기본 계약서",description:"이름, 연락처, 날짜, 금액, 서명",fields:[{fieldType:"text",label:"이름",placeholder:"성명을 입력하세요",isRequired:!0,pageNumber:1,positionX:15,positionY:10,width:30,height:5},{fieldType:"phone",label:"연락처",placeholder:"010-0000-0000",isRequired:!0,pageNumber:1,positionX:15,positionY:18,width:30,height:5},{fieldType:"date",label:"계약일",isRequired:!0,pageNumber:1,positionX:55,positionY:10,width:25,height:5},{fieldType:"number",label:"금액",placeholder:"계약 금액",isRequired:!0,pageNumber:1,positionX:55,positionY:18,width:25,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]},{name:"간단 동의서",description:"이름, 동의 체크, 서명",fields:[{fieldType:"text",label:"이름",placeholder:"성명",isRequired:!0,pageNumber:1,positionX:15,positionY:15,width:30,height:5},{fieldType:"checkbox",label:"동의함",isRequired:!1,pageNumber:1,positionX:15,positionY:65,width:5,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]},{name:"상세 계약서",description:"이름, 연락처, 이메일, 주소, 날짜, 금액, 동의, 서명",fields:[{fieldType:"text",label:"성명",placeholder:"성명",isRequired:!0,pageNumber:1,positionX:10,positionY:8,width:25,height:5},{fieldType:"phone",label:"연락처",placeholder:"010-0000-0000",isRequired:!0,pageNumber:1,positionX:10,positionY:16,width:25,height:5},{fieldType:"email",label:"이메일",placeholder:"email@example.com",isRequired:!1,pageNumber:1,positionX:10,positionY:24,width:25,height:5},{fieldType:"text",label:"주소",placeholder:"주소 입력",isRequired:!1,pageNumber:1,positionX:10,positionY:32,width:40,height:5},{fieldType:"date",label:"계약일",isRequired:!0,pageNumber:1,positionX:55,positionY:8,width:25,height:5},{fieldType:"number",label:"계약금액",placeholder:"금액",isRequired:!0,pageNumber:1,positionX:55,positionY:16,width:25,height:5},{fieldType:"checkbox",label:"약관 동의",isRequired:!1,pageNumber:1,positionX:10,positionY:70,width:5,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]}];function N({fields:e,onChange:o,templateImageUrl:n}){let[d,c]=(0,l.useState)(new Set),[u,h]=(0,l.useState)(null),[m,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(1),C=(0,l.useRef)(null),M=e=>c(new Set([e])),T=()=>c(new Set),X=e=>{c(t=>{let l=new Set(t);return l.has(e)?l.delete(e):l.add(e),l})},Y=()=>{let t=Array.from(d).sort((e,t)=>t-e),l=[...e];for(let e of t)l=l.filter((t,l)=>l!==e);o(l),T()},R=(t,l)=>{o(e.map((e,a)=>a===t?{...e,...l}:e))},q=()=>{let t=Array.from(d).sort((e,t)=>e-t);if(0===t[0])return;let l=[...e],a=new Set;for(let e of t)[l[e-1],l[e]]=[l[e],l[e-1]],a.add(e-1);o(l),c(a)},S=()=>{let t=Array.from(d).sort((e,t)=>t-e);if(t[0]===e.length-1)return;let l=[...e],a=new Set;for(let e of t)[l[e],l[e+1]]=[l[e+1],l[e]],a.add(e+1);o(l),c(a)},L=(0,l.useCallback)((t,l,a)=>{M(t),h(t);let i=C.current;if(!i)return;let s=i.getBoundingClientRect(),r=e[t],o=r.positionX,n=r.positionY,d=(e,i)=>{let d=(e-l)/s.width*100,c=(i-a)/s.height*100;R(t,{positionX:Math.round(10*Math.max(0,Math.min(100-r.width,o+d)))/10,positionY:Math.round(10*Math.max(0,Math.min(100-r.height,n+c)))/10})},c=e=>d(e.clientX,e.clientY),u=e=>{e.preventDefault(),d(e.touches[0].clientX,e.touches[0].clientY)},m=()=>{h(null),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",m)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",m),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",m)},[e]),z=(0,l.useCallback)((t,l,a)=>{M(t);let i=C.current;if(!i)return;let s=i.getBoundingClientRect(),r=e[t],o=r.width,n=r.height,d=(e,i)=>{let d=(e-l)/s.width*100,c=(i-a)/s.height*100;R(t,{width:Math.round(10*Math.max(5,Math.min(100-r.positionX,o+d)))/10,height:Math.round(10*Math.max(2,Math.min(100-r.positionY,n+c)))/10})},c=e=>d(e.clientX,e.clientY),u=e=>{e.preventDefault(),d(e.touches[0].clientX,e.touches[0].clientY)},h=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",h)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",h),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",h)},[e]),E=(0,l.useCallback)((e,t)=>{t.preventDefault(),L(e,t.clientX,t.clientY)},[L]),$=(0,l.useCallback)((e,t)=>{t.preventDefault(),L(e,t.touches[0].clientX,t.touches[0].clientY)},[L]),P=1===d.size?Array.from(d)[0]:null,V=null!==P?e[P]:null;return(0,t.jsxs)("div",{className:"flex gap-4 h-full",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("button",{onClick:()=>k(e=>Math.max(.5,e-.1)),className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"축소",children:(0,t.jsx)(g,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsx)("input",{type:"range",min:50,max:200,value:Math.round(100*w),onChange:e=>k(Number(e.target.value)/100),className:"flex-1 h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-blue-500"}),(0,t.jsx)("button",{onClick:()=>k(e=>Math.min(2,e+.1)),className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"확대",children:(0,t.jsx)(x.ZoomIn,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 min-w-[3rem] text-center",children:[Math.round(100*w),"%"]})]}),(0,t.jsx)("div",{className:"overflow-auto flex-1",style:{maxHeight:"70vh"},children:(0,t.jsxs)("div",{ref:C,className:"relative bg-white border-2 border-dashed border-gray-200 rounded-xl overflow-hidden origin-top-left",style:{aspectRatio:"210/297",transform:`scale(${w})`,transformOrigin:"top left",width:"100%"},children:[n&&!m?(0,t.jsx)("img",{src:n,alt:"Template",className:"absolute inset-0 w-full h-full object-fill",onError:()=>N(!0)}):(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-300",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm",children:"계약서 템플릿 미리보기"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"필드를 추가하고 드래그하여 배치하세요"})]})}),e.map((e,l)=>{let a=v.find(t=>t.value===e.fieldType)?.icon||r.Type,i=d.has(l);return(0,t.jsxs)("div",{className:`absolute border-2 rounded cursor-move transition-colors flex items-center text-left gap-1 px-1 text-xs ${i?"border-blue-500 bg-blue-50/80 z-10":"border-blue-300/60 bg-blue-50/50 hover:border-blue-400"}`,style:{left:`${e.positionX}%`,top:`${e.positionY}%`,width:`${e.width}%`,height:`${e.height}%`,minHeight:"20px"},onMouseDown:e=>E(l,e),onTouchStart:e=>$(l,e),children:[(0,t.jsx)(a,{className:"w-3 h-3 text-blue-500 shrink-0"}),(0,t.jsx)("span",{className:"truncate text-blue-700",children:e.label}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-blue-500 cursor-se-resize rounded-tl-sm",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),z(l,e.clientX,e.clientY)},onTouchStart:e=>{e.stopPropagation(),e.preventDefault(),z(l,e.touches[0].clientX,e.touches[0].clientY)}})]},l)})]})})]}),(0,t.jsxs)("div",{className:"w-72 shrink-0 space-y-4 overflow-y-auto max-h-[80vh]",children:[0===e.length&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-100 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,t.jsx)(p,{className:"w-3.5 h-3.5 text-blue-600"}),(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-700",children:"필드 템플릿"})]}),(0,t.jsx)("div",{className:"space-y-1.5",children:j.map(e=>(0,t.jsxs)("button",{onClick:()=>{o(e.fields.map((e,t)=>({...e,sortOrder:t}))),T()},className:"w-full text-left px-2.5 py-2 rounded-lg bg-white border border-blue-100 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:e.description})]},e.name))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:"필드 추가"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:v.map(({value:l,label:a,icon:i})=>(0,t.jsxs)("button",{onClick:()=>{let t,a;return t=v.find(e=>e.value===l),a={fieldType:l,label:t?.label||l,placeholder:"",isRequired:!0,pageNumber:1,positionX:10+2*e.length%60,positionY:10+5*e.length%60,width:"signature"===l?25:"checkbox"===l?5:20,height:"signature"===l?8:"checkbox"===l?5:4,sortOrder:e.length},void(o([...e,a]),M(e.length))},className:"flex items-center gap-1.5 px-2 py-1.5 text-xs rounded-lg border border-gray-100 hover:bg-blue-50 hover:border-blue-200 transition-colors",children:[(0,t.jsx)(i,{className:"w-3.5 h-3.5 text-gray-500"}),a]},l))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-gray-500",children:["필드 목록 (",e.length,")"]}),d.size>0&&(0,t.jsx)("button",{onClick:T,className:"text-[10px] text-gray-400 hover:text-gray-600",children:"선택 해제"})]}),d.size>=2&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-2 p-1.5 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("span",{className:"text-[10px] text-blue-600 font-medium mr-auto",children:[d.size,"개 선택"]}),(0,t.jsx)("button",{onClick:q,className:"p-1 rounded hover:bg-blue-100 text-blue-600 transition-colors",title:"위로 이동",children:(0,t.jsx)(y,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:S,className:"p-1 rounded hover:bg-blue-100 text-blue-600 transition-colors",title:"아래로 이동",children:(0,t.jsx)(f,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:Y,className:"p-1 rounded hover:bg-red-100 text-red-500 transition-colors",title:"선택 삭제",children:(0,t.jsx)(s.Trash2,{className:"w-3.5 h-3.5"})})]}),(0,t.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:0===e.length?(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center py-3",children:"위에서 필드를 추가하세요"}):e.map((l,a)=>{let i=d.has(a);return(0,t.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer text-xs ${i?"bg-blue-50 text-blue-700":"hover:bg-gray-50"}`,onClick:e=>{e.ctrlKey||e.metaKey?X(a):M(a)},children:[(0,t.jsx)("input",{type:"checkbox",checked:i,onChange:()=>X(a),onClick:e=>e.stopPropagation(),className:"w-3 h-3 rounded border-gray-300 text-blue-600 shrink-0"}),(0,t.jsx)("span",{className:"flex-1 truncate",children:l.label}),(0,t.jsx)("button",{onClick:t=>{let l,i;t.stopPropagation(),i={...l=e[a],id:void 0,positionX:Math.min(l.positionX+3,100-l.width),positionY:Math.min(l.positionY+3,100-l.height),sortOrder:e.length,label:`${l.label} (복사)`},o([...e,i]),M(e.length)},className:"text-gray-400 hover:text-blue-500",title:"복사",children:(0,t.jsx)(b.Copy,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e.filter((e,t)=>t!==a)),c(e=>{let t=new Set;return e.forEach(e=>{e<a?t.add(e):e>a&&t.add(e-1)}),t})},className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(s.Trash2,{className:"w-3 h-3"})})]},a)})})]}),V&&null!==P&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:"필드 속성"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.default,{label:"라벨",value:V.label,onChange:e=>R(P,{label:e.target.value})}),(0,t.jsx)(i.default,{label:"안내 문구",value:V.placeholder||"",onChange:e=>R(P,{placeholder:e.target.value})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"required",checked:V.isRequired,onChange:e=>R(P,{isRequired:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("label",{htmlFor:"required",className:"text-xs text-gray-600",children:"필수 입력"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(i.default,{label:"X (%)",type:"number",value:String(V.positionX),onChange:e=>R(P,{positionX:Number(e.target.value)})}),(0,t.jsx)(i.default,{label:"Y (%)",type:"number",value:String(V.positionY),onChange:e=>R(P,{positionY:Number(e.target.value)})}),(0,t.jsx)(i.default,{label:"너비 (%)",type:"number",value:String(V.width),onChange:e=>R(P,{width:Number(e.target.value)})}),(0,t.jsx)(i.default,{label:"높이 (%)",type:"number",value:String(V.height),onChange:e=>R(P,{height:Number(e.target.value)})})]})]})]}),d.size>1&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-3",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:[d.size,"개 선택됨"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(a.default,{size:"sm",variant:"outline",fullWidth:!0,onClick:q,children:[(0,t.jsx)(y,{className:"w-3.5 h-3.5 mr-1"}),"위로 이동"]}),(0,t.jsxs)(a.default,{size:"sm",variant:"outline",fullWidth:!0,onClick:S,children:[(0,t.jsx)(f,{className:"w-3.5 h-3.5 mr-1"}),"아래로 이동"]}),(0,t.jsxs)(a.default,{size:"sm",variant:"danger",fullWidth:!0,onClick:Y,children:[(0,t.jsx)(s.Trash2,{className:"w-3.5 h-3.5 mr-1"}),"선택 삭제"]})]})]})]})]})}e.s(["default",()=>N],87307)},45937,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(18566),i=e.i(9165),s=e.i(59544),r=e.i(22706),o=e.i(87307),n=e.i(88840),d=e.i(56909);function c(){let{id:e,templateId:c}=(0,a.useParams)();(0,a.useRouter)();let{toast:u}=(0,n.useToast)(),[h,m]=(0,l.useState)(null),[p,x]=(0,l.useState)([]),[g,b]=(0,l.useState)(!0),[y,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=(0,i.extractData)(await i.default.get(`/contract-templates/${c}`));m(e);let t=(0,i.extractData)(await i.default.get(`/contract-templates/${c}/fields`));if(x(t),e.fileId){let t=await i.default.get(`/files/${e.fileId}/download`,{responseType:"blob"});j(URL.createObjectURL(t.data))}}catch{u("템플릿을 불러오지 못했습니다.","error")}finally{b(!1)}})()},[c]);let N=async()=>{f(!0);try{let e=p.map((e,t)=>({fieldType:e.fieldType,label:e.label,placeholder:e.placeholder||void 0,isRequired:e.isRequired,pageNumber:e.pageNumber,positionX:e.positionX,positionY:e.positionY,width:e.width,height:e.height,sortOrder:t,defaultValue:e.defaultValue||void 0,validationRule:e.validationRule||void 0}));await i.default.post(`/contract-templates/${c}/fields`,{fields:e}),u("필드가 저장되었습니다.","success")}catch{u("필드 저장에 실패했습니다.","error")}finally{f(!1)}};return g?(0,t.jsxs)("div",{children:[(0,t.jsx)(r.default,{title:"필드 편집",backHref:`/partner/events/${e}`}),(0,t.jsx)("div",{className:"h-96 bg-white rounded-2xl animate-pulse"})]}):(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)(r.default,{title:h?.name||"필드 편집",subtitle:"필드를 추가하고 드래그하여 위치를 지정하세요",backHref:`/partner/events/${e}`,actions:(0,t.jsxs)(s.default,{onClick:N,loading:y,children:[(0,t.jsx)(d.Save,{className:"w-4 h-4 mr-1"}),"저장"]})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,t.jsx)(o.default,{fields:p,onChange:x,templateImageUrl:v})})]})}e.s(["default",()=>c])}]);