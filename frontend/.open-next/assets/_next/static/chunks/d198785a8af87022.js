(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22706,e=>{"use strict";var t=e.i(43476);let d=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var s=e.i(18566);function r({title:e,subtitle:r,backHref:i,actions:l}){let n=(0,s.useRouter)();return(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,t.jsx)("button",{onClick:()=>n.push(i),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,t.jsx)(d,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e}),r&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:r})]})]}),l&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:l})]})}e.s(["default",()=>r],22706)},96640,e=>{"use strict";var t=e.i(43476),d=e.i(75157);function s({status:e,className:s}){return(0,t.jsx)("span",{className:(0,d.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(0,d.getStatusColor)(e),s),children:(0,d.getStatusLabel)(e)})}e.s(["default",()=>s])},49804,e=>{"use strict";var t=e.i(43476),d=e.i(75157);function s({contract:e,flow:s,partnerFilter:r}){let i,l=Number(e.totalAmount)||0,n=new Set(e.selectedItems.map(e=>e.rowId)),a=new Map(e.selectedItems.map(e=>[e.rowId,e])),o=r?e.selectedItems.filter(e=>e.partnerName===r):e.selectedItems,x=o.reduce((e,t)=>e+Number(t.unitPrice),0);return(0,t.jsxs)("div",{className:"ic-print-container",children:[(0,t.jsxs)("div",{style:{textAlign:"center",borderBottom:"2px solid #111",paddingBottom:"16px",marginBottom:"24px"},children:[(0,t.jsx)("h1",{style:{fontSize:"22px",fontWeight:700,margin:0},children:"통합 계약서"}),(0,t.jsxs)("p",{style:{fontSize:"12px",color:"#666",marginTop:"6px"},children:["계약번호: ",e.shortCode]})]}),(0,t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px",fontSize:"13px"},children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600,width:"20%"},children:"고객명"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd",width:"30%"},children:e.customerName||"-"}),(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600,width:"20%"},children:"연락처"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd",width:"30%"},children:e.customerPhone||"-"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600},children:"동호수"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd"},children:e.unitNumber||"-"}),(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600},children:"평형"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd"},children:e.apartmentType?.name||"-"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600},children:"서명일"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd"},children:e.signedAt?(0,d.formatDateTime)(e.signedAt):"-"}),(0,t.jsx)("td",{style:{padding:"6px 12px",background:"#f5f5f5",border:"1px solid #ddd",fontWeight:600},children:"행사"}),(0,t.jsx)("td",{style:{padding:"6px 12px",border:"1px solid #ddd"},children:e.config?.event?.name||"-"})]})]})}),(0,t.jsxs)("h3",{style:{fontSize:"14px",fontWeight:700,marginBottom:"10px",borderBottom:"1px solid #333",paddingBottom:"4px"},children:["계약 사항 ",r&&(0,t.jsxs)("span",{style:{fontSize:"12px",fontWeight:400,color:"#666"},children:["(",r,")"]})]}),s&&!r?s.partners.map(e=>e.categories.map(d=>(0,t.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,t.jsx)("p",{style:{fontSize:"13px",fontWeight:700,marginBottom:"2px"},children:e.partnerItems||d.categoryName}),(0,t.jsx)("p",{style:{fontSize:"10px",color:"#999",marginBottom:"6px"},children:e.partnerName}),(0,t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:(0,t.jsx)("tbody",{children:d.options.map(e=>{let d=n.has(e.rowId),s=a.get(e.rowId);return(0,t.jsxs)("tr",{style:{background:"#fff"},children:[(0,t.jsx)("td",{style:{padding:"4px 8px",border:"1px solid #ddd",width:"24px",textAlign:"center"},children:d?"✓":""}),(0,t.jsx)("td",{style:{padding:"4px 8px",border:"1px solid #ddd",fontWeight:d?600:400,color:d?"#111":"#999"},children:e.optionName}),(0,t.jsx)("td",{style:{padding:"4px 8px",border:"1px solid #ddd",textAlign:"right",width:"100px",fontWeight:d?600:400,color:d?"#111":"#999"},children:d&&s?`${Number(s.unitPrice).toLocaleString()}원`:""})]},e.rowId)})})})]},d.sheetId))):(i=o.reduce((e,t)=>{let d=`${t.partnerName} - ${t.categoryName}`;return e[d]||(e[d]=[]),e[d].push(t),e},{}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px",fontSize:"12px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f0f0f0"},children:[(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600},children:"파트너"}),(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600},children:"카테고리"}),(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600},children:"옵션"}),(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"right",fontWeight:600},children:"금액"})]})}),(0,t.jsx)("tbody",{children:Object.entries(i).map(([e,d])=>d.map((s,r)=>(0,t.jsxs)("tr",{children:[0===r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{rowSpan:d.length,style:{padding:"5px 8px",border:"1px solid #ddd",verticalAlign:"top"},children:s.partnerName}),(0,t.jsx)("td",{rowSpan:d.length,style:{padding:"5px 8px",border:"1px solid #ddd",verticalAlign:"top"},children:s.categoryName})]}):null,(0,t.jsx)("td",{style:{padding:"5px 8px",border:"1px solid #ddd"},children:s.optionName}),(0,t.jsxs)("td",{style:{padding:"5px 8px",border:"1px solid #ddd",textAlign:"right"},children:[Number(s.unitPrice).toLocaleString(),"원"]})]},`${e}-${r}`)))})]})),(0,t.jsx)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px",fontSize:"13px"},children:(0,t.jsx)("tfoot",{children:(0,t.jsxs)("tr",{style:{background:"#f9f9f9",fontWeight:700},children:[(0,t.jsx)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right"},children:r?"소계":"총 계약금액"}),(0,t.jsxs)("td",{style:{padding:"8px",border:"1px solid #ddd",textAlign:"right",width:"120px",fontSize:"14px"},children:[(r?x:l).toLocaleString(),"원"]})]})})}),!r&&e.paymentSchedule&&e.paymentSchedule.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{style:{fontSize:"14px",fontWeight:700,marginBottom:"10px",borderBottom:"1px solid #333",paddingBottom:"4px"},children:"납부 일정"}),(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px",fontSize:"12px"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f0f0f0"},children:[(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"left",fontWeight:600},children:"구분"}),(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"right",fontWeight:600},children:"비율"}),(0,t.jsx)("th",{style:{padding:"6px 8px",border:"1px solid #ddd",textAlign:"right",fontWeight:600},children:"금액"})]})}),(0,t.jsx)("tbody",{children:e.paymentSchedule.map((e,d)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{padding:"5px 8px",border:"1px solid #ddd"},children:e.name}),(0,t.jsxs)("td",{style:{padding:"5px 8px",border:"1px solid #ddd",textAlign:"right"},children:[e.ratio,"%"]}),(0,t.jsxs)("td",{style:{padding:"5px 8px",border:"1px solid #ddd",textAlign:"right"},children:[Number(e.amount).toLocaleString(),"원"]})]},d))})]})]}),e.config?.legalTerms?.trim()&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("h3",{style:{fontSize:"14px",fontWeight:700,marginBottom:"6px",borderBottom:"1px solid #333",paddingBottom:"4px"},children:"약관"}),(0,t.jsx)("p",{style:{fontSize:"11px",whiteSpace:"pre-wrap",lineHeight:"1.5",color:"#444"},children:e.config.legalTerms}),e.legalAgreed&&(0,t.jsx)("p",{style:{fontSize:"11px",color:"#16a34a",marginTop:"6px"},children:"✓ 약관에 동의함"})]}),e.config?.specialNotes?.trim()&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("h3",{style:{fontSize:"14px",fontWeight:700,marginBottom:"6px",borderBottom:"1px solid #333",paddingBottom:"4px"},children:"특약사항"}),(0,t.jsx)("p",{style:{fontSize:"12px",whiteSpace:"pre-wrap",lineHeight:"1.6"},children:e.config.specialNotes})]}),e.specialNotes?.trim()&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("h3",{style:{fontSize:"14px",fontWeight:700,marginBottom:"6px",borderBottom:"1px solid #333",paddingBottom:"4px"},children:"특이사항 (비고)"}),(0,t.jsx)("p",{style:{fontSize:"12px",whiteSpace:"pre-wrap",lineHeight:"1.6"},children:e.specialNotes})]}),e.signatureData&&(0,t.jsxs)("div",{style:{marginTop:"30px",textAlign:"right"},children:[(0,t.jsx)("p",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"서명"}),(0,t.jsx)("img",{src:e.signatureData,alt:"고객 서명",style:{height:"60px",border:"1px solid #ddd",borderRadius:"4px",display:"inline-block"}}),(0,t.jsxs)("p",{style:{fontSize:"11px",color:"#999",marginTop:"4px"},children:[e.customerName||"고객"," (서명)"]})]}),(0,t.jsxs)("div",{style:{marginTop:"40px",borderTop:"1px solid #ddd",paddingTop:"10px",fontSize:"10px",color:"#999",textAlign:"center"},children:["본 계약서는 전자서명을 통해 체결되었습니다. · 계약번호: ",e.shortCode]})]})}e.s(["default",()=>s])},68223,e=>{"use strict";var t=e.i(43476),d=e.i(71645),s=e.i(18566),r=e.i(9165),i=e.i(96640),l=e.i(22706),n=e.i(49804),a=e.i(75157);function o(){let{id:e}=(0,s.useParams)(),o=(0,s.useRouter)(),[x,c]=(0,d.useState)(null),[p,h]=(0,d.useState)(!0),[m,g]=(0,d.useState)(!1);(0,d.useEffect)(()=>{h(!0),r.default.get(`/admin/ic-contracts/${e}`).then(e=>c((0,r.extractData)(e))).catch(()=>o.push("/admin/ic-contracts")).finally(()=>h(!1))},[e]);let j=t=>{confirm(`상태를 "${t}"로 변경하시겠습니까?`)&&(g(!0),r.default.patch(`/admin/ic-contracts/${e}/status`,{status:t}).then(e=>c((0,r.extractData)(e))).catch(()=>alert("상태 변경에 실패했습니다.")).finally(()=>g(!1)))};return p?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-8 w-48 bg-gray-100 rounded-xl animate-pulse"}),(0,t.jsx)("div",{className:"h-64 bg-gray-100 rounded-xl animate-pulse"})]}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"print-hidden",children:[(0,t.jsx)(l.default,{title:`통합 계약 ${x.shortCode}`,subtitle:x.customerName||"고객 미입력",backHref:"/admin/ic-contracts",actions:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>window.print(),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:"인쇄"}),(0,t.jsx)("button",{onClick:()=>{let e=x.config?.eventId||x.config?.event?.id;e&&o.push(`/admin/events/${e}/ic-config`)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50",children:"설정 보기"}),"signed"===x.status&&(0,t.jsx)("button",{disabled:m,onClick:()=>j("completed"),className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50",children:"확인 (완료)"}),"cancelled"!==x.status&&(0,t.jsx)("button",{disabled:m,onClick:()=>j("cancelled"),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",children:"취소"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"계약 정보"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"계약번호"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.shortCode})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"고객명"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.customerName||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"연락처"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.customerPhone||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"동호수"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.unitNumber||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"행사"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.config?.event?.name||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"평형"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.apartmentType?.name||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"상태"}),(0,t.jsx)("div",{className:"mt-0.5",children:(0,t.jsx)(i.default,{status:x.status})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"총액"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:(0,a.formatCurrency)(x.totalAmount)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"체결일"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:x.signedAt?(0,a.formatDateTime)(x.signedAt):"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"생성일"}),(0,t.jsx)("p",{className:"font-medium mt-0.5",children:(0,a.formatDateTime)(x.createdAt)})]})]})]}),x.selectedItems?.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"선택 항목"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"파트너"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"카테고리"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"옵션"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"단가"})]})}),(0,t.jsx)("tbody",{children:x.selectedItems.map((e,d)=>(0,t.jsxs)("tr",{className:"border-b border-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.partnerName}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.categoryName}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.optionName}),(0,t.jsx)("td",{className:"px-4 py-2 text-right",children:(0,a.formatCurrency)(e.unitPrice)})]},d))})]})})]}),x.paymentSchedule?.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"납부 일정"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-600",children:"구분"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"비율"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-600",children:"금액"})]})}),(0,t.jsx)("tbody",{children:x.paymentSchedule.map((e,d)=>(0,t.jsxs)("tr",{className:"border-b border-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.name}),(0,t.jsxs)("td",{className:"px-4 py-2 text-right",children:[e.ratio,"%"]}),(0,t.jsx)("td",{className:"px-4 py-2 text-right",children:(0,a.formatCurrency)(e.amount)})]},d))})]})})]}),x.signatureData&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"서명"}),(0,t.jsx)("img",{src:x.signatureData,alt:"고객 서명",className:"max-w-xs border border-gray-200 rounded-lg"})]}),x.specialNotes&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-100 p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-4",children:"특이사항"}),(0,t.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:x.specialNotes})]})]}),(0,t.jsx)("div",{className:"hidden",style:{display:"none"},children:(0,t.jsx)("div",{className:"ic-print-container",children:(0,t.jsx)(n.default,{contract:x})})})]}):null}e.s(["default",()=>o])}]);