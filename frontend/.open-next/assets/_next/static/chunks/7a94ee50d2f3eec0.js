(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(75157);let s=(0,r.forwardRef)(({className:e,variant:r="primary",size:s="md",fullWidth:a,loading:l,disabled:o,children:n,...d},c)=>(0,t.jsxs)("button",{ref:c,className:(0,i.cn)("inline-flex items-center justify-center font-semibold transition-all duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-45 disabled:cursor-not-allowed active:scale-[0.98]",{primary:"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-sm focus:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 hover:shadow-sm focus:ring-gray-400",outline:"border-2 border-blue-600 text-blue-600 hover:bg-blue-50 focus:ring-blue-500",ghost:"text-blue-600 hover:bg-blue-50 focus:ring-blue-500",danger:"bg-error text-white hover:opacity-90 hover:shadow-sm focus:ring-red-400",success:"bg-success text-white hover:opacity-90 hover:shadow-sm focus:ring-success"}[r],{sm:"px-3.5 py-1.5 text-[13px]",md:"px-5 py-2.5 text-sm",lg:"px-7 py-3 text-base",xl:"px-9 py-4 text-lg rounded-xl"}[s],a&&"w-full",e),disabled:o||l,...d,children:[l&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]}));s.displayName="Button",e.s(["default",0,s])},22706,e=>{"use strict";var t=e.i(43476);let r=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var i=e.i(18566);function s({title:e,subtitle:s,backHref:a,actions:l}){let o=(0,i.useRouter)();return(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,t.jsx)("button",{onClick:()=>o.push(a),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:(0,t.jsx)(r,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:e}),s&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:s})]})]}),l&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:l})]})}e.s(["default",()=>s],22706)},3812,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(75157);let s=(0,r.forwardRef)(({className:e,label:r,error:s,helperText:a,id:l,...o},n)=>{let d=l||r?.replace(/\s/g,"-").toLowerCase();return(0,t.jsxs)("div",{className:"w-full",children:[r&&(0,t.jsx)("label",{htmlFor:d,className:"block text-sm font-semibold text-gray-700 mb-2",children:r}),(0,t.jsx)("input",{ref:n,id:d,className:(0,i.cn)("w-full px-3.5 py-2.5 rounded-lg border bg-white text-gray-800 text-sm","placeholder:text-gray-400","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",s?"border-error focus:ring-error":"border-gray-300 hover:border-gray-400","disabled:bg-gray-50 disabled:text-gray-500 disabled:cursor-not-allowed","read-only:bg-gray-50",e),...o}),s&&(0,t.jsx)("p",{className:"mt-1 text-[13px] text-error",children:s}),a&&!s&&(0,t.jsx)("p",{className:"mt-1 text-[13px] text-gray-500",children:a})]})});s.displayName="Input",e.s(["default",0,s])},54212,e=>{"use strict";let t=(0,e.i(75254).default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);e.s(["ZoomIn",()=>t],54212)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},71649,e=>{"use strict";let t=(0,e.i(75254).default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>t],71649)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},85873,e=>{"use strict";let t=(0,e.i(75254).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["default",()=>t])},74558,e=>{"use strict";var t=e.i(85873);e.s(["PenLine",()=>t.default])},87307,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(59544),s=e.i(3812),a=e.i(27612),l=e.i(71649),o=e.i(75254);let n=(0,o.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var d=e.i(87316),c=e.i(43432),h=e.i(63488),u=e.i(74558);let m=(0,o.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),x=(0,o.default)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);var p=e.i(54212);let b=(0,o.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var g=e.i(74886);let y=(0,o.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),f=(0,o.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),v=(0,o.default)("text-align-start",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]]),N=(0,o.default)("text-align-end",[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]]),j=(0,o.default)("align-center-horizontal",[["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M10 16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4",key:"11f1s0"}],["path",{d:"M10 8V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v4",key:"t14dx9"}],["path",{d:"M20 16v1a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-1",key:"1w07xs"}],["path",{d:"M14 8V7c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v1",key:"1apec2"}]]),w=(0,o.default)("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),k=[{value:"text",label:"텍스트",icon:l.Type},{value:"number",label:"숫자",icon:n},{value:"date",label:"날짜",icon:d.Calendar},{value:"checkbox",label:"체크박스",icon:m},{value:"phone",label:"전화번호",icon:c.Phone},{value:"email",label:"이메일",icon:h.Mail},{value:"signature",label:"서명",icon:u.PenLine}],M=[{name:"기본 계약서",description:"이름, 연락처, 날짜, 금액, 서명",fields:[{fieldType:"text",label:"이름",placeholder:"성명을 입력하세요",isRequired:!0,pageNumber:1,positionX:15,positionY:10,width:30,height:5},{fieldType:"phone",label:"연락처",placeholder:"010-0000-0000",isRequired:!0,pageNumber:1,positionX:15,positionY:18,width:30,height:5},{fieldType:"date",label:"계약일",isRequired:!0,pageNumber:1,positionX:55,positionY:10,width:25,height:5},{fieldType:"number",label:"금액",placeholder:"계약 금액",isRequired:!0,pageNumber:1,positionX:55,positionY:18,width:25,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]},{name:"간단 동의서",description:"이름, 동의 체크, 서명",fields:[{fieldType:"text",label:"이름",placeholder:"성명",isRequired:!0,pageNumber:1,positionX:15,positionY:15,width:30,height:5},{fieldType:"checkbox",label:"동의함",isRequired:!1,pageNumber:1,positionX:15,positionY:65,width:5,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]},{name:"상세 계약서",description:"이름, 연락처, 이메일, 주소, 날짜, 금액, 동의, 서명",fields:[{fieldType:"text",label:"성명",placeholder:"성명",isRequired:!0,pageNumber:1,positionX:10,positionY:8,width:25,height:5},{fieldType:"phone",label:"연락처",placeholder:"010-0000-0000",isRequired:!0,pageNumber:1,positionX:10,positionY:16,width:25,height:5},{fieldType:"email",label:"이메일",placeholder:"email@example.com",isRequired:!1,pageNumber:1,positionX:10,positionY:24,width:25,height:5},{fieldType:"text",label:"주소",placeholder:"주소 입력",isRequired:!1,pageNumber:1,positionX:10,positionY:32,width:40,height:5},{fieldType:"date",label:"계약일",isRequired:!0,pageNumber:1,positionX:55,positionY:8,width:25,height:5},{fieldType:"number",label:"계약금액",placeholder:"금액",isRequired:!0,pageNumber:1,positionX:55,positionY:16,width:25,height:5},{fieldType:"checkbox",label:"약관 동의",isRequired:!1,pageNumber:1,positionX:10,positionY:70,width:5,height:5},{fieldType:"signature",label:"서명",isRequired:!0,pageNumber:1,positionX:35,positionY:80,width:30,height:12}]}];function C({fields:e,onChange:o,templateImageUrl:n}){let[d,c]=(0,r.useState)(new Set),[h,u]=(0,r.useState)(null),[m,C]=(0,r.useState)(!1),[X,Y]=(0,r.useState)(1),E=(0,r.useRef)(null),R=(0,r.useRef)(e);R.current=e;let T=(0,r.useRef)([]),z=(0,r.useRef)(!1),[L,S]=(0,r.useState)(null),q=(0,r.useCallback)(e=>{!z.current&&(T.current.push(JSON.parse(JSON.stringify(e))),T.current.length>50&&T.current.shift())},[]),H=(0,r.useCallback)(()=>{let e=T.current.pop();e&&(z.current=!0,o(e),z.current=!1)},[o]),A=(0,r.useCallback)(e=>{q(R.current),o(e)},[o,q]),D=e=>c(new Set([e])),$=()=>c(new Set),V=e=>{c(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})};(0,r.useEffect)(()=>{let e=e=>{let t=e.target.tagName;if((e.ctrlKey||e.metaKey)&&"z"===e.key){e.preventDefault(),H();return}if(0===d.size||"INPUT"===t||"TEXTAREA"===t||"SELECT"===t)return;let r=e.shiftKey?1:.1,i=0,s=0;switch(e.key){case"ArrowLeft":i=-r;break;case"ArrowRight":i=r;break;case"ArrowUp":s=-r;break;case"ArrowDown":s=r;break;case"Delete":case"Backspace":e.preventDefault(),P();return;default:return}e.preventDefault(),q(R.current);let a=[...R.current];d.forEach(e=>{let t=a[e];a[e]={...t,positionX:Math.round(10*Math.max(0,Math.min(100-Number(t.width),Number(t.positionX)+i)))/10,positionY:Math.round(10*Math.max(0,Math.min(100-Number(t.height),Number(t.positionY)+s)))/10}}),o(a)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[d,o,H,q]);let P=()=>{let e=Array.from(d).sort((e,t)=>t-e),t=[...R.current];for(let r of e)t=t.filter((e,t)=>t!==r);A(t),$()},B=(t,r)=>{A(e.map((e,i)=>i===t?{...e,...r}:e))},K=()=>{let t=Array.from(d).sort((e,t)=>e-t);if(0===t[0])return;let r=[...e],i=new Set;for(let e of t)[r[e-1],r[e]]=[r[e],r[e-1]],i.add(e-1);A(r),c(i)},O=()=>{let t=Array.from(d).sort((e,t)=>t-e);if(t[0]===e.length-1)return;let r=[...e],i=new Set;for(let e of t)[r[e],r[e+1]]=[r[e+1],r[e]],i.add(e+1);A(r),c(i)},W=t=>{if(d.size<2)return;let r=Array.from(d),i=r.map(t=>e[t]),s=[...e];switch(t){case"left":{let e=Math.min(...i.map(e=>Number(e.positionX)));r.forEach(t=>{s[t]={...s[t],positionX:e}});break}case"right":{let e=Math.max(...i.map(e=>Number(e.positionX)+Number(e.width)));r.forEach(t=>{s[t]={...s[t],positionX:e-Number(s[t].width)}});break}case"top":{let e=Math.min(...i.map(e=>Number(e.positionY)));r.forEach(t=>{s[t]={...s[t],positionY:e}});break}case"bottom":{let e=Math.max(...i.map(e=>Number(e.positionY)+Number(e.height)));r.forEach(t=>{s[t]={...s[t],positionY:e-Number(s[t].height)}});break}case"centerH":{let e=(Math.min(...i.map(e=>Number(e.positionX)))+Math.max(...i.map(e=>Number(e.positionX)+Number(e.width))))/2;r.forEach(t=>{s[t]={...s[t],positionX:Math.round((e-Number(s[t].width)/2)*10)/10}});break}case"centerV":{let e=(Math.min(...i.map(e=>Number(e.positionY)))+Math.max(...i.map(e=>Number(e.positionY)+Number(e.height))))/2;r.forEach(t=>{s[t]={...s[t],positionY:Math.round((e-Number(s[t].height)/2)*10)/10}})}}A(s)},I=t=>{if(d.size<3)return;let r=Array.from(d),i=[...e];if("horizontal"===t){let t=r.sort((t,r)=>Number(e[t].positionX)-Number(e[r].positionX)),s=Number(e[t[0]].positionX),a=(Number(e[t[t.length-1]].positionX)-s)/(t.length-1);t.forEach((e,t)=>{i[e]={...i[e],positionX:Math.round((s+a*t)*10)/10}})}else{let t=r.sort((t,r)=>Number(e[t].positionY)-Number(e[r].positionY)),s=Number(e[t[0]].positionY),a=(Number(e[t[t.length-1]].positionY)-s)/(t.length-1);t.forEach((e,t)=>{i[e]={...i[e],positionY:Math.round((s+a*t)*10)/10}})}A(i)},U=(0,r.useCallback)((e,t,r,i)=>{i||D(e),u(e),q(R.current);let s=E.current;if(!s)return;let a=s.getBoundingClientRect(),l=(i?Array.from(d):[e]).map(e=>({idx:e,x:Number(R.current[e].positionX),y:Number(R.current[e].positionY)})),n=(e,i)=>{let s=(e-t)/a.width*100,n=(i-r)/a.height*100,d=[...R.current];l.forEach(({idx:e,x:t,y:r})=>{let i=d[e];d[e]={...i,positionX:Math.round(10*Math.max(0,Math.min(100-Number(i.width),t+s)))/10,positionY:Math.round(10*Math.max(0,Math.min(100-Number(i.height),r+n)))/10}}),o(d)},c=e=>n(e.clientX,e.clientY),h=e=>{e.preventDefault(),n(e.touches[0].clientX,e.touches[0].clientY)},m=()=>{u(null),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",m)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",m),document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",m)},[e,d,o,q]),F=(0,r.useCallback)((t,r,i)=>{D(t),q(R.current);let s=E.current;if(!s)return;let a=s.getBoundingClientRect(),l=e[t],n=Number(l.width),d=Number(l.height),c=(e,s)=>{let c=(e-r)/a.width*100,h=(s-i)/a.height*100,u=Math.max(5,Math.min(100-Number(l.positionX),n+c)),m=Math.max(2,Math.min(100-Number(l.positionY),d+h));o(R.current.map((e,r)=>r===t?{...e,width:Math.round(10*u)/10,height:Math.round(10*m)/10}:e))},h=e=>c(e.clientX,e.clientY),u=e=>{e.preventDefault(),c(e.touches[0].clientX,e.touches[0].clientY)},m=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",m)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",m),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",m)},[e,o,q]),Z=(0,r.useCallback)((e,t)=>{if(t.preventDefault(),t.stopPropagation(),t.ctrlKey||t.metaKey||t.altKey)return void V(e);let r=d.has(e)&&d.size>1;U(e,t.clientX,t.clientY,r)},[U,d]),J=(0,r.useCallback)((e,t)=>{t.preventDefault(),t.stopPropagation();let r=d.has(e)&&d.size>1;U(e,t.touches[0].clientX,t.touches[0].clientY,r)},[U,d]),G=(0,r.useCallback)(e=>{let t=E.current;if(!t)return;let r=t.getBoundingClientRect(),i=e.clientX,s=e.clientY,a=(i-r.left)/r.width*100,l=(s-r.top)/r.height*100;$();let o=!1,n=e=>{o=!0;let t=(e.clientX-r.left)/r.width*100,i=(e.clientY-r.top)/r.height*100;S({left:Math.min(a,t),top:Math.min(l,i),width:Math.abs(t-a),height:Math.abs(i-l)})},d=e=>{if(document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",d),o){let t=(e.clientX-r.left)/r.width*100,i=(e.clientY-r.top)/r.height*100,s=Math.min(a,t),o=Math.max(a,t),n=Math.min(l,i),d=Math.max(l,i);if(o-s>1||d-n>1){let e=new Set;R.current.forEach((t,r)=>{let i=Number(t.positionX),a=Number(t.positionY),l=Number(t.width),c=Number(t.height);i<o&&i+l>s&&a<d&&a+c>n&&e.add(r)}),e.size>0&&c(e)}}S(null)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",d)},[]),Q=1===d.size?Array.from(d)[0]:null,_=null!==Q?e[Q]:null,ee="flex flex-col items-center gap-0.5 p-1.5 rounded-lg border border-gray-200 hover:bg-blue-50 hover:border-blue-200 transition-colors text-gray-600 hover:text-blue-600";return(0,t.jsxs)("div",{className:"flex gap-4 h-full",tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("button",{onClick:H,className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"실행 취소 (Ctrl+Z)",children:(0,t.jsx)(w,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsx)("div",{className:"w-px h-5 bg-gray-200"}),(0,t.jsx)("button",{onClick:()=>Y(e=>Math.max(.5,e-.1)),className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"축소",children:(0,t.jsx)(b,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsx)("input",{type:"range",min:50,max:200,value:Math.round(100*X),onChange:e=>Y(Number(e.target.value)/100),className:"w-24 h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-blue-500"}),(0,t.jsx)("button",{onClick:()=>Y(e=>Math.min(2,e+.1)),className:"p-1.5 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"확대",children:(0,t.jsx)(p.ZoomIn,{className:"w-4 h-4 text-gray-600"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 min-w-[3rem] text-center",children:[Math.round(100*X),"%"]}),d.size>0&&(0,t.jsxs)("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:[d.size,"개 선택 | ←→↑↓ 0.1% | Shift 1%"]})]}),(0,t.jsx)("div",{className:"overflow-auto flex-1",style:{maxHeight:"calc(100vh - 160px)"},children:(0,t.jsxs)("div",{ref:E,className:"relative bg-white border-2 border-dashed border-gray-200 rounded-xl origin-top-left select-none",style:{aspectRatio:"210/297",transform:`scale(${X})`,transformOrigin:"top left",width:"100%"},onMouseDown:G,children:[n&&!m?(0,t.jsx)("img",{src:n,alt:"Template",className:"absolute inset-0 w-full h-full object-fill pointer-events-none",onError:()=>C(!0),draggable:!1}):(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-300 pointer-events-none",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm",children:"계약서 템플릿 미리보기"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"필드를 추가하고 드래그하여 배치하세요"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"빈 공간 드래그로 여러 필드 선택"})]})}),L&&(L.width>1||L.height>1)&&(0,t.jsx)("div",{className:"absolute border-2 border-blue-400 bg-blue-200/30 pointer-events-none z-20",style:{left:`${L.left}%`,top:`${L.top}%`,width:`${L.width}%`,height:`${L.height}%`}}),e.map((e,r)=>{let i=k.find(t=>t.value===e.fieldType)?.icon||l.Type,s=d.has(r);return(0,t.jsxs)("div",{className:`absolute border-2 rounded cursor-move transition-colors flex items-center text-left gap-1 px-1 text-xs ${s?"border-blue-500 bg-blue-50/80 z-10":"border-blue-300/60 bg-blue-50/50 hover:border-blue-400"}`,style:{left:`${e.positionX}%`,top:`${e.positionY}%`,width:`${e.width}%`,height:`${e.height}%`,minHeight:"20px"},onMouseDown:e=>Z(r,e),onTouchStart:e=>J(r,e),children:[(0,t.jsx)(i,{className:"w-3 h-3 text-blue-500 shrink-0"}),(0,t.jsx)("span",{className:"truncate text-blue-700",children:e.label}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-blue-500 cursor-se-resize rounded-tl-sm",onMouseDown:e=>{e.stopPropagation(),e.preventDefault(),F(r,e.clientX,e.clientY)},onTouchStart:e=>{e.stopPropagation(),e.preventDefault(),F(r,e.touches[0].clientX,e.touches[0].clientY)}})]},r)})]})})]}),(0,t.jsxs)("div",{className:"w-64 shrink-0 space-y-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 120px)"},children:[0===e.length&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-100 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-2",children:[(0,t.jsx)(x,{className:"w-3.5 h-3.5 text-blue-600"}),(0,t.jsx)("p",{className:"text-xs font-semibold text-blue-700",children:"필드 템플릿"})]}),(0,t.jsx)("div",{className:"space-y-1.5",children:M.map(e=>(0,t.jsxs)("button",{onClick:()=>{A(e.fields.map((e,t)=>({...e,sortOrder:t}))),$()},className:"w-full text-left px-2.5 py-2 rounded-lg bg-white border border-blue-100 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-800",children:e.name}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:e.description})]},e.name))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:"필드 추가"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-1.5",children:k.map(({value:r,label:i,icon:s})=>(0,t.jsxs)("button",{onClick:()=>{let t,i;return t=k.find(e=>e.value===r),i={fieldType:r,label:t?.label||r,placeholder:"",isRequired:!0,pageNumber:1,positionX:10+2*e.length%60,positionY:10+5*e.length%60,width:"signature"===r?25:"checkbox"===r?5:20,height:"signature"===r?8:"checkbox"===r?5:4,sortOrder:e.length},void(A([...e,i]),D(e.length))},className:"flex items-center gap-1.5 px-2 py-1.5 text-xs rounded-lg border border-gray-200 hover:bg-blue-50 hover:border-blue-200 transition-colors",children:[(0,t.jsx)(s,{className:"w-3.5 h-3.5 text-gray-500"}),i]},r))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-gray-500",children:["필드 목록 (",e.length,")"]}),d.size>0&&(0,t.jsx)("button",{onClick:$,className:"text-[10px] text-gray-400 hover:text-gray-600",children:"선택 해제"})]}),d.size>=2&&(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-2 p-1.5 bg-blue-50 rounded-lg",children:[(0,t.jsxs)("span",{className:"text-[10px] text-blue-600 font-medium mr-auto",children:[d.size,"개 선택"]}),(0,t.jsx)("button",{onClick:K,className:"p-1 rounded hover:bg-blue-100 text-blue-600",title:"위로",children:(0,t.jsx)(y,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:O,className:"p-1 rounded hover:bg-blue-100 text-blue-600",title:"아래로",children:(0,t.jsx)(f,{className:"w-3.5 h-3.5"})}),(0,t.jsx)("button",{onClick:P,className:"p-1 rounded hover:bg-error-light text-error",title:"삭제",children:(0,t.jsx)(a.Trash2,{className:"w-3.5 h-3.5"})})]}),(0,t.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:0===e.length?(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center py-3",children:"위에서 필드를 추가하세요"}):e.map((r,i)=>{let s=d.has(i);return(0,t.jsxs)("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer text-xs ${s?"bg-blue-50 text-blue-700":"hover:bg-gray-50"}`,onClick:e=>{e.ctrlKey||e.metaKey||e.altKey?V(i):D(i)},children:[(0,t.jsx)("input",{type:"checkbox",checked:s,onChange:()=>V(i),onClick:e=>e.stopPropagation(),className:"w-3 h-3 rounded border-gray-300 text-blue-600 shrink-0"}),(0,t.jsx)("span",{className:"flex-1 truncate",children:r.label}),(0,t.jsx)("button",{onClick:t=>{let r,s;t.stopPropagation(),s={...r=e[i],id:void 0,positionX:Math.min(Number(r.positionX)+3,100-Number(r.width)),positionY:Math.min(Number(r.positionY)+3,100-Number(r.height)),sortOrder:e.length,label:r.label},A([...e,s]),D(e.length)},className:"text-gray-400 hover:text-blue-500",title:"복사",children:(0,t.jsx)(g.Copy,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),A(e.filter((e,t)=>t!==i)),c(e=>{let t=new Set;return e.forEach(e=>{e<i?t.add(e):e>i&&t.add(e-1)}),t})},className:"text-gray-400 hover:text-error",children:(0,t.jsx)(a.Trash2,{className:"w-3 h-3"})})]},i)})})]}),_&&null!==Q&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:"필드 속성"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(s.default,{label:"라벨",value:_.label,onChange:e=>B(Q,{label:e.target.value})}),(0,t.jsx)(s.default,{label:"안내 문구",value:_.placeholder||"",onChange:e=>B(Q,{placeholder:e.target.value})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"required",checked:_.isRequired,onChange:e=>B(Q,{isRequired:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("label",{htmlFor:"required",className:"text-xs text-gray-600",children:"필수 입력"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)(s.default,{label:"X (%)",type:"number",value:String(_.positionX),onChange:e=>B(Q,{positionX:Number(e.target.value)})}),(0,t.jsx)(s.default,{label:"Y (%)",type:"number",value:String(_.positionY),onChange:e=>B(Q,{positionY:Number(e.target.value)})}),(0,t.jsx)(s.default,{label:"너비 (%)",type:"number",value:String(_.width),onChange:e=>B(Q,{width:Number(e.target.value)})}),(0,t.jsx)(s.default,{label:"높이 (%)",type:"number",value:String(_.height),onChange:e=>B(Q,{height:Number(e.target.value)})})]})]})]}),d.size>1&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-3",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-gray-500 mb-2",children:[d.size,"개 선택됨"]}),(0,t.jsx)("p",{className:"text-[10px] font-medium text-gray-400 mb-1",children:"가로 정렬"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-1 mb-2",children:[(0,t.jsxs)("button",{onClick:()=>W("left"),className:ee,title:"좌측 정렬",children:[(0,t.jsx)(v,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"text-[9px]",children:"좌측"})]}),(0,t.jsxs)("button",{onClick:()=>W("centerH"),className:ee,title:"가로 중앙",children:[(0,t.jsx)(j,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"text-[9px]",children:"중앙"})]}),(0,t.jsxs)("button",{onClick:()=>W("right"),className:ee,title:"우측 정렬",children:[(0,t.jsx)(N,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"text-[9px]",children:"우측"})]})]}),(0,t.jsx)("p",{className:"text-[10px] font-medium text-gray-400 mb-1",children:"세로 정렬"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-1 mb-2",children:[(0,t.jsxs)("button",{onClick:()=>W("top"),className:ee,title:"상단 정렬",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,t.jsx)("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),(0,t.jsx)("rect",{x:"7",y:"4",width:"3",height:"12",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"14",y:"4",width:"3",height:"7",rx:"1",fill:"currentColor",opacity:"0.3"})]}),(0,t.jsx)("span",{className:"text-[9px]",children:"상단"})]}),(0,t.jsxs)("button",{onClick:()=>W("centerV"),className:ee,title:"세로 중앙",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,t.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeDasharray:"2 2"}),(0,t.jsx)("rect",{x:"7",y:"4",width:"3",height:"16",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"14",y:"7",width:"3",height:"10",rx:"1",fill:"currentColor",opacity:"0.3"})]}),(0,t.jsx)("span",{className:"text-[9px]",children:"중앙"})]}),(0,t.jsxs)("button",{onClick:()=>W("bottom"),className:ee,title:"하단 정렬",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:[(0,t.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),(0,t.jsx)("rect",{x:"7",y:"8",width:"3",height:"12",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"14",y:"13",width:"3",height:"7",rx:"1",fill:"currentColor",opacity:"0.3"})]}),(0,t.jsx)("span",{className:"text-[9px]",children:"하단"})]})]}),d.size>=3&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-[10px] font-medium text-gray-400 mb-1",children:"균등 분배"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-1 mb-3",children:[(0,t.jsxs)("button",{onClick:()=>I("horizontal"),className:ee,title:"가로 균등 분배",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("rect",{x:"3",y:"6",width:"3",height:"12",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"10.5",y:"6",width:"3",height:"12",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"18",y:"6",width:"3",height:"12",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("line",{x1:"4.5",y1:"4",x2:"4.5",y2:"2"}),(0,t.jsx)("line",{x1:"12",y1:"4",x2:"12",y2:"2"}),(0,t.jsx)("line",{x1:"19.5",y1:"4",x2:"19.5",y2:"2"})]}),(0,t.jsx)("span",{className:"text-[9px]",children:"가로"})]}),(0,t.jsxs)("button",{onClick:()=>I("vertical"),className:ee,title:"세로 균등 분배",children:[(0,t.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("rect",{x:"6",y:"3",width:"12",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"6",y:"10.5",width:"12",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"}),(0,t.jsx)("rect",{x:"6",y:"18",width:"12",height:"3",rx:"1",fill:"currentColor",opacity:"0.3"})]}),(0,t.jsx)("span",{className:"text-[9px]",children:"세로"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.default,{size:"sm",variant:"outline",fullWidth:!0,onClick:K,children:[(0,t.jsx)(y,{className:"w-3.5 h-3.5 mr-1"}),"위로 이동"]}),(0,t.jsxs)(i.default,{size:"sm",variant:"outline",fullWidth:!0,onClick:O,children:[(0,t.jsx)(f,{className:"w-3.5 h-3.5 mr-1"}),"아래로 이동"]}),(0,t.jsxs)(i.default,{size:"sm",variant:"danger",fullWidth:!0,onClick:P,children:[(0,t.jsx)(a.Trash2,{className:"w-3.5 h-3.5 mr-1"}),"선택 삭제"]})]})]})]})]})}e.s(["default",()=>C],87307)},45937,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),s=e.i(9165),a=e.i(59544),l=e.i(22706),o=e.i(87307),n=e.i(88840),d=e.i(56909);function c(){let{id:e,templateId:c}=(0,i.useParams)();(0,i.useRouter)();let{toast:h}=(0,n.useToast)(),[u,m]=(0,r.useState)(null),[x,p]=(0,r.useState)([]),[b,g]=(0,r.useState)(!0),[y,f]=(0,r.useState)(!1),[v,N]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{let e=(0,s.extractData)(await s.default.get(`/contract-templates/${c}`));m(e);let t=(0,s.extractData)(await s.default.get(`/contract-templates/${c}/fields`));if(p(t.map(e=>({...e,positionX:Number(e.positionX),positionY:Number(e.positionY),width:Number(e.width),height:Number(e.height),pageNumber:Number(e.pageNumber)||1}))),e.fileId){let t=await s.default.get(`/files/${e.fileId}/download`,{responseType:"blob"});N(URL.createObjectURL(t.data))}}catch{h("템플릿을 불러오지 못했습니다.","error")}finally{g(!1)}})()},[c]);let j=async()=>{f(!0);try{let e=x.map((e,t)=>({...e.id?{id:e.id}:{},fieldType:e.fieldType,label:e.label,placeholder:e.placeholder||void 0,isRequired:e.isRequired,pageNumber:Number(e.pageNumber)||1,positionX:Number(e.positionX),positionY:Number(e.positionY),width:Number(e.width),height:Number(e.height),sortOrder:t,defaultValue:e.defaultValue||void 0,validationRule:e.validationRule||void 0}));await s.default.post(`/contract-templates/${c}/fields`,{fields:e}),h("필드가 저장되었습니다.","success")}catch(t){let e=t.response?.data?.message;console.error("Field save error:",t.response?.status,e),h(Array.isArray(e)?e[0]:"필드 저장에 실패했습니다.","error")}finally{f(!1)}};return b?(0,t.jsxs)("div",{children:[(0,t.jsx)(l.default,{title:"필드 편집",backHref:`/partner/events/${e}`}),(0,t.jsx)("div",{className:"h-96 bg-white rounded-xl animate-pulse"})]}):(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)(l.default,{title:u?.name||"필드 편집",subtitle:"필드를 추가하고 드래그하여 위치를 지정하세요",backHref:`/partner/events/${e}`,actions:(0,t.jsxs)(a.default,{onClick:j,loading:y,children:[(0,t.jsx)(d.Save,{className:"w-4 h-4 mr-1"}),"저장"]})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 mt-4",children:(0,t.jsx)(o.default,{fields:x,onChange:p,templateImageUrl:v})})]})}e.s(["default",()=>c])}]);